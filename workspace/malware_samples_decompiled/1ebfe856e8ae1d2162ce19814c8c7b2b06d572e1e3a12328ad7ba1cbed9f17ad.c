/* Function: FUN_00401000 */

LRESULT FUN_00401000(HWND param_1,UINT param_2,WPARAM param_3,int param_4)

{
  int iVar1;
  LONG LVar2;
  LRESULT LVar3;
  HDC hDC;
  HBRUSH hbr;
  HFONT h;
  HGDIOBJ h_00;
  int iVar4;
  tagPAINTSTRUCT local_60;
  tagRECT local_20;
  LOGBRUSH local_10;
  
  iVar1 = DAT_00429a30;
  if (param_2 == 0xf) {
    hDC = BeginPaint(param_1,&local_60);
    local_10.lbStyle = 0;
    GetClientRect(param_1,&local_20);
    LVar2 = local_20.bottom;
    local_20.bottom = 0;
    for (; local_20.top < LVar2; local_20.top = local_20.top + 4) {
      iVar4 = LVar2 - local_20.top;
      local_10.lbColor =
           (uint)CONCAT11((char)((int)((uint)*(byte *)(iVar1 + 0x52) * iVar4 +
                                      (uint)*(byte *)(iVar1 + 0x56) * local_20.top) / LVar2),
                          (char)((int)((uint)*(byte *)(iVar1 + 0x51) * iVar4 +
                                      (uint)*(byte *)(iVar1 + 0x55) * local_20.top) / LVar2)) << 8 |
           (int)((uint)*(byte *)(iVar1 + 0x50) * iVar4 +
                (uint)*(byte *)(iVar1 + 0x54) * local_20.top) / LVar2 & 0xffU;
      hbr = CreateBrushIndirect(&local_10);
      local_20.bottom = local_20.bottom + 4;
      FillRect(hDC,&local_20,hbr);
      DeleteObject(hbr);
    }
    if (*(int *)(iVar1 + 0x58) != -1) {
      h = CreateFontIndirectW(*(LOGFONTW **)(iVar1 + 0x34));
      if (h != (HFONT)0x0) {
        local_20.left = 0x10;
        local_20.top = 8;
        SetBkMode(hDC,1);
        SetTextColor(hDC,*(COLORREF *)(iVar1 + 0x58));
        h_00 = SelectObject(hDC,h);
        DrawTextW(hDC,(LPCWSTR)&DAT_00428a20,-1,&local_20,0x820);
        SelectObject(hDC,h_00);
        DeleteObject(h);
      }
    }
    EndPaint(param_1,&local_60);
    LVar3 = 0;
  }
  else {
    if (param_2 == 0x46) {
      *(uint *)(param_4 + 0x18) = *(uint *)(param_4 + 0x18) | 0x10;
      *(undefined4 *)(param_4 + 4) = DAT_00429a28;
    }
    LVar3 = DefWindowProcW(param_1,param_2,param_3,param_4);
  }
  return LVar3;
}



/* Function: FUN_0040117d */

void FUN_0040117d(int param_1)

{
  uint uVar1;
  uint uVar2;
  uint *puVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  
  uVar1 = *(uint *)(param_1 * 0x818 + 8 + DAT_00429a48);
  if ((uVar1 & 2) != 0) {
    uVar4 = param_1 + 1;
    if (uVar4 < DAT_00429a4c) {
      puVar3 = (uint *)(uVar4 * 0x818 + 8 + DAT_00429a48);
      iVar5 = 0;
      do {
        uVar2 = *puVar3;
        if ((uVar2 & 2) == 0) {
          if ((uVar2 & 4) == 0) {
            iVar6 = iVar5;
            if ((uVar2 & 0x10) == 0) {
              *puVar3 = (uVar2 ^ uVar1) & 1 ^ uVar2;
            }
          }
          else {
            iVar6 = iVar5 + -1;
            if (iVar5 == 0) {
              return;
            }
          }
        }
        else {
          iVar6 = iVar5 + 1;
        }
        uVar4 = uVar4 + 1;
        puVar3 = puVar3 + 0x206;
        iVar5 = iVar6;
      } while (uVar4 < DAT_00429a4c);
    }
  }
  return;
}



/* Function: FUN_004011ef */

uint FUN_004011ef(uint param_1,int param_2)

{
  uint *puVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  int local_c;
  int local_8;
  
  iVar2 = DAT_00429a48;
  iVar5 = param_1 * 0x818 + DAT_00429a48;
  local_8 = 0;
  local_c = 0;
  if (((*(uint *)(iVar5 + 8) & 2) != 0) && (param_2 != 0)) {
    param_1 = param_1 + 1;
    *(uint *)(iVar5 + 8) = *(uint *)(iVar5 + 8) & 0xffffffbe;
  }
  if (param_1 < DAT_00429a4c) {
    do {
      puVar1 = (uint *)(param_1 * 0x818 + 8 + iVar2);
      uVar3 = param_1 + 1;
      uVar4 = *puVar1;
      if ((uVar4 & 2) != 0) {
        uVar3 = FUN_004011ef(param_1,1);
        uVar4 = *puVar1;
      }
      if ((uVar4 & 4) != 0) {
        if (local_8 == 0) {
          return uVar3;
        }
        if (local_c != 0) {
          *(uint *)(iVar5 + 8) = *(uint *)(iVar5 + 8) | 0x40;
          return uVar3;
        }
        *(uint *)(iVar5 + 8) = *(uint *)(iVar5 + 8) & 0xffffff7f | 1;
        return uVar3;
      }
      if ((uVar4 & 0x40) != 0) {
        local_8 = local_8 + 1;
      }
      if ((uVar4 & 1) == 0) {
        local_c = local_c + 1;
      }
      else {
        local_8 = local_8 + 1;
      }
      param_1 = uVar3;
    } while (uVar3 < DAT_00429a4c);
  }
  return 0;
}



/* Function: FUN_00401299 */

void FUN_00401299(uint param_1)

{
  uint uVar1;
  uint *puVar2;
  uint uVar3;
  
  uVar3 = 0;
  if ((param_1 < 0x20) && (DAT_00429a4c != 0)) {
    puVar2 = (uint *)(DAT_00429a48 + 8);
    do {
      uVar1 = *puVar2;
      if ((uVar1 & 6) == 0) {
        if ((puVar2[-1] & 1 << ((byte)param_1 & 0x1f)) == 0) {
          uVar1 = uVar1 & 0xfffffffe;
        }
        else {
          uVar1 = uVar1 | 1;
        }
        *puVar2 = uVar1;
      }
      uVar3 = uVar3 + 1;
      puVar2 = puVar2 + 0x206;
    } while (uVar3 < DAT_00429a4c);
  }
  return;
}



/* Function: FUN_004012e2 */

uint FUN_004012e2(int param_1)

{
  uint uVar1;
  uint *puVar2;
  bool bVar3;
  int *local_c;
  uint local_8;
  
  local_8 = 0;
  local_c = (int *)(DAT_00429a30 + 0x94);
  do {
    uVar1 = 0;
    if (*local_c != 0) {
      bVar3 = DAT_00429a4c == 0;
      if (DAT_00429a4c != 0) {
        puVar2 = (uint *)(DAT_00429a48 + 8);
        do {
          if (((*puVar2 & 6) == 0) &&
             (((param_1 == 0 || (*(int *)(param_1 + uVar1 * 4) != 0)) &&
              ((puVar2[-1] & 1 << ((byte)local_8 & 0x1f)) != (*puVar2 & 1) << ((byte)local_8 & 0x1f)
              )))) break;
          uVar1 = uVar1 + 1;
          puVar2 = puVar2 + 0x206;
        } while (uVar1 < DAT_00429a4c);
        bVar3 = uVar1 == DAT_00429a4c;
      }
      if (bVar3) {
        return local_8;
      }
    }
    local_8 = local_8 + 1;
    local_c = local_c + 1;
    if (0x1f < local_8) {
      return local_8;
    }
  } while( true );
}



/* Function: FUN_0040136d */

void FUN_0040136d(int param_1)

{
  if (param_1 < 0) {
    FUN_004064dc((ushort *)(&DAT_0042a000 + (param_1 + 1) * -0x800));
  }
  return;
}



/* Function: FUN_00401389 */

undefined4 FUN_00401389(int param_1,HWND param_2)

{
  HWND pHVar1;
  int iVar2;
  int iVar3;
  WPARAM wParam;
  LPARAM lParam;
  
  while ((-1 < param_1 && (pHVar1 = (HWND)(param_1 * 0x1c + DAT_00429a50), pHVar1->unused != 1))) {
    pHVar1 = FUN_00401434(pHVar1);
    if (pHVar1 == (HWND)0x7fffffff) {
      return 0x7fffffff;
    }
    iVar2 = FUN_0040136d((int)pHVar1);
    if (iVar2 == 0) {
      iVar3 = 1;
      iVar2 = param_1 + 1;
    }
    else {
      iVar2 = iVar2 + -1;
      iVar3 = iVar2 - param_1;
    }
    param_1 = iVar2;
    if (param_2 != (HWND)0x0) {
      DAT_00428a0c = DAT_00428a0c + iVar3;
      lParam = 0;
      wParam = MulDiv(DAT_00428a0c,30000,DAT_004289f4);
      SendMessageW(param_2,0x402,wParam,lParam);
    }
  }
  return 0;
}



/* Function: FUN_0040140b */

void FUN_0040140b(int param_1)

{
  FUN_00401389(*(int *)(DAT_00429a30 + 0x6c + param_1 * 4),(HWND)0x0);
  return;
}



/* Function: FUN_00401423 */

void FUN_00401423(int param_1)

{
  FUN_00405601(param_1,(LPCWSTR)&DAT_0040adc8);
  return;
}



/* Function: FUN_00401434 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

HWND FUN_00401434(HWND param_1)

{
  short sVar1;
  undefined4 uVar2;
  short *psVar3;
  HWND pHVar4;
  uint uVar5;
  LRESULT LVar6;
  HGDIOBJ ho;
  HDC hdc;
  SIZE_T dwBytes;
  undefined *puVar7;
  LPCWSTR lpFileName;
  LPCWSTR pWVar8;
  HKEY pHVar9;
  LSTATUS LVar10;
  HANDLE pvVar11;
  LPWSTR pWVar12;
  BOOL BVar13;
  int iVar14;
  HGLOBAL hMem;
  HWND pHVar15;
  FARPROC pFVar16;
  HRESULT HVar17;
  byte bVar18;
  int iVar19;
  LPCWSTR extraout_EDX;
  LPCWSTR pWVar20;
  WCHAR *pWVar21;
  undefined4 *puVar22;
  int *piVar23;
  HWND pHVar24;
  LPCWSTR pWVar25;
  DWORD DVar26;
  bool bVar27;
  undefined8 uVar28;
  undefined8 uVar29;
  LONG lDistanceToMove;
  PLONG lpDistanceToMoveHigh;
  uint uVar30;
  _WIN32_FIND_DATAW local_2e0;
  undefined1 local_90 [32];
  HINSTANCE local_70;
  LPCWSTR local_6c;
  LPCWSTR local_68;
  undefined1 local_64 [12];
  uchar auStack_58 [2];
  uchar auStack_56 [2];
  uint local_54;
  FARPROC local_50 [2];
  LPCWSTR local_48;
  FARPROC local_44;
  undefined8 local_40;
  int local_38;
  HWND local_34 [2];
  HWND local_2c;
  FILETIME local_28;
  HWND local_20;
  HWND local_1c;
  undefined8 local_18;
  HWND local_10;
  HWND local_c;
  HWND local_8;
  
  pHVar15 = DAT_0040ce28;
  pHVar24 = param_1;
  piVar23 = &local_38;
  for (iVar19 = 7; iVar19 != 0; iVar19 = iVar19 + -1) {
    *piVar23 = pHVar24->unused;
    pHVar24 = pHVar24 + 1;
    piVar23 = piVar23 + 1;
  }
  local_c = DAT_00429a28;
  pWVar20 = (LPCWSTR)0x0;
  local_10 = (HWND)(&DAT_0042a000 + (int)local_34[1] * 0x800);
  DAT_0040ce24 = local_34;
  iVar19 = (int)local_34[0] * 0x800;
  pHVar24 = (HWND)(&DAT_0042a000 + iVar19);
  local_8 = (HWND)0x0;
  switch(local_38) {
  case 2:
    goto switchD_0040148a_caseD_2;
  case 3:
    pWVar20 = (LPCWSTR)0x0;
LAB_00401493:
    FUN_00405601((int)local_34[0],pWVar20);
    return (HWND)0x7fffffff;
  case 4:
    DAT_004289ec = DAT_004289ec + 1;
    if (DAT_00429a28 == (HWND)0x0) {
      return (HWND)0x7fffffff;
    }
    PostQuitMessage(0);
    return (HWND)0x7fffffff;
  case 5:
    iVar19 = FUN_0040136d((int)local_34[0]);
    pHVar15 = (HWND)FUN_00401389(iVar19 + -1,(HWND)0x0);
    return pHVar15;
  case 6:
    FUN_00405601((int)local_34[0],(LPCWSTR)0x0);
    break;
  case 7:
    uVar29 = FUN_00402db0(0);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    DVar26 = (DWORD)uVar29;
    if ((int)DVar26 < 2) {
      DVar26 = 1;
    }
    Sleep(DVar26);
    break;
  case 8:
    SetForegroundWindow(DAT_00429a28);
    break;
  case 9:
    if (DAT_004289f0 != (HWND)0x0) {
      ShowWindow(DAT_004289f0,(int)local_34[1]);
    }
    if (DAT_00428a04 != (HWND)0x0) {
      ShowWindow(DAT_00428a04,(int)local_34[0]);
    }
    break;
  case 10:
    pWVar20 = FUN_00402dd2(0xfffffff0);
    pWVar12 = (LPWSTR)SetFileAttributesW(pWVar20,(DWORD)local_34[1]);
    goto LAB_004015d9;
  case 0xb:
    param_1 = (HWND)FUN_00402dd2(0xfffffff0);
    pWVar12 = FUN_00405ef6((LPCWSTR)param_1);
    if (pWVar12 != (LPWSTR)0x0) {
      do {
        psVar3 = (short *)FUN_00405e78(pWVar12,L'\\');
        sVar1 = *psVar3;
        *psVar3 = 0;
        if (((sVar1 == 0) && (local_2c != (HWND)0x0)) && (iVar19 = FUN_00405b47(), iVar19 != 0)) {
          DVar26 = FUN_00405ad0((LPCWSTR)param_1);
          if (DVar26 != 0) {
            local_8 = (HWND)((int)&local_8->unused + 1);
            goto LAB_00401638;
          }
        }
        else {
          DVar26 = FUN_00405b2a((LPCWSTR)param_1);
LAB_00401638:
          if ((DVar26 != 0) &&
             ((DVar26 != 0xb7 ||
              (DVar26 = GetFileAttributesW((LPCWSTR)param_1), (DVar26 & 0x10) == 0)))) {
            local_8 = (HWND)((int)&local_8->unused + 1);
          }
        }
        *psVar3 = sVar1;
        pWVar12 = psVar3 + 1;
      } while (sVar1 != 0);
    }
    if (local_34[1] == (HWND)0x0) {
      iVar19 = -0xb;
      goto LAB_0040231d;
    }
    FUN_00401423(-0x1a);
    FUN_0040657c((LPWSTR)&DAT_00435000,(LPCWSTR)param_1);
    BVar13 = SetCurrentDirectoryW((LPCWSTR)param_1);
    if (BVar13 == 0) {
      local_8 = (HWND)((int)&local_8->unused + 1);
    }
    break;
  case 0xc:
    pWVar20 = FUN_00402dd2(0);
    puVar7 = FUN_004068d9(pWVar20);
    local_28.dwLowDateTime = (DWORD)local_34[1];
    goto joined_r0x00401a4a;
  case 0xd:
    if ((int)local_2c < 1) {
      if ((int)local_2c < 0) {
        DAT_0040ce2c = (&DAT_00429aa0)[(int)local_34[0]];
      }
      else {
        *(undefined4 *)(&DAT_00429b00 + (int)local_34[0] * 4) = (&DAT_00429aa0)[(int)local_34[0]];
      }
      uVar2 = FUN_00402db0(1);
      (&DAT_00429aa0)[(int)local_34[0]] = uVar2;
    }
    else {
      (&DAT_00429aa0)[(int)local_34[0]] = *(undefined4 *)(&DAT_00429b00 + (int)local_34[0] * 4);
      if ((int)local_28.dwLowDateTime < 0) {
        (&DAT_00429aa0)[(int)local_34[0]] = DAT_0040ce2c;
      }
    }
    break;
  case 0xe:
    uVar30 = (&DAT_00429aa0)[(int)local_2c];
    pHVar15 = local_34[uVar30 == 0];
    (&DAT_00429aa0)[(int)local_2c] = uVar30 & local_28.dwLowDateTime;
    return pHVar15;
  case 0xf:
    pHVar15 = (HWND)(&DAT_00429aa0)[(int)local_34[1]];
    goto switchD_00401b07_default;
  case 0x10:
    pWVar20 = FUN_00402dd2(0xffffffd0);
    pWVar8 = FUN_00402dd2(0xffffffdf);
    FUN_00402dd2(0x13);
    BVar13 = MoveFileW(pWVar20,pWVar8);
    if (BVar13 == 0) {
      if ((local_2c == (HWND)0x0) || (puVar7 = FUN_004068d9(pWVar20), puVar7 == (undefined *)0x0))
      goto LAB_0040295a;
      FUN_0040633c(pWVar20,pWVar8);
      iVar19 = -0x1c;
    }
    else {
      iVar19 = -0x1d;
    }
    goto LAB_0040231d;
  case 0x11:
    pHVar24 = (HWND)FUN_00402dd2(0);
    pHVar15 = local_10;
    DVar26 = GetFullPathNameW((LPCWSTR)pHVar24,0x400,(LPWSTR)local_10,(LPWSTR *)&param_1);
    if (DVar26 == 0) {
LAB_0040173c:
      local_8 = (HWND)0x1;
      *(undefined2 *)&pHVar15->unused = 0;
    }
    else if ((pHVar24 < param_1) && ((short)param_1->unused != 0)) {
      puVar7 = FUN_004068d9((LPCWSTR)pHVar24);
      if (puVar7 == (undefined *)0x0) goto LAB_0040173c;
      FUN_0040657c((LPWSTR)param_1,(LPCWSTR)(puVar7 + 0x2c));
    }
    if (local_2c == (HWND)0x0) {
      GetShortPathNameW((LPCWSTR)pHVar15,(LPWSTR)pHVar15,0x400);
    }
    break;
  case 0x12:
    pWVar20 = FUN_00402dd2(0xffffffff);
    DVar26 = SearchPathW((LPCWSTR)0x0,pWVar20,(LPCWSTR)0x0,0x400,(LPWSTR)pHVar24,(LPWSTR *)&param_1)
    ;
    bVar27 = DVar26 == 0;
    goto LAB_0040177d;
  case 0x13:
    pWVar20 = FUN_00402dd2(0xffffffef);
    pWVar12 = FUN_0040609b((LPWSTR)pHVar24,pWVar20);
    goto LAB_004015d9;
  case 0x14:
    local_c = (HWND)FUN_00402dd2(0x31);
    param_1 = (HWND)((uint)local_34[0] & 7);
    iVar19 = FUN_00405ec2((ushort *)local_c);
    if (iVar19 == 0) {
      pHVar15 = local_c;
      pWVar20 = (LPCWSTR)FUN_0040657c((LPWSTR)&DAT_0040a5c8,(LPCWSTR)&DAT_00435000);
      pWVar20 = FUN_00405e4b(pWVar20);
      lstrcatW(pWVar20,(LPCWSTR)pHVar15);
    }
    else {
      FUN_0040657c((LPWSTR)&DAT_0040a5c8,(LPCWSTR)local_c);
    }
    FUN_0040682a((LPCWSTR)&DAT_0040a5c8);
    do {
      if (2 < (int)param_1) {
        puVar7 = FUN_004068d9((LPCWSTR)&DAT_0040a5c8);
        uVar30 = 0;
        if (puVar7 != (undefined *)0x0) {
          uVar30 = CompareFileTime((FILETIME *)(puVar7 + 0x14),&local_28);
        }
        param_1 = (HWND)(uint)((((uint)((int)&param_1[-1].unused + 1U) | 0x80000000) & uVar30) == 0)
        ;
      }
      if (param_1 == (HWND)0x0) {
        FUN_00406047((LPCWSTR)&DAT_0040a5c8);
      }
      local_40._4_4_ =
           (HWND)FUN_0040606c((LPCWSTR)&DAT_0040a5c8,0x40000000,(param_1 != (HWND)0x1) + 1);
      if (local_40._4_4_ != (HWND)0xffffffff) {
        FUN_00405601(-0x16,(LPCWSTR)local_c);
        DAT_00429ad4 = DAT_00429ad4 + 1;
        DVar26 = FUN_00403314((int)local_2c,local_40._4_4_,(undefined *)0x0,0);
        DAT_00429ad4 = DAT_00429ad4 + -1;
        if (((HWND)local_28.dwLowDateTime != (HWND)0xffffffff) ||
           ((HWND)local_28.dwHighDateTime != (HWND)0xffffffff)) {
          SetFileTime(local_40._4_4_,&local_28,(FILETIME *)0x0,&local_28);
        }
        CloseHandle(local_40._4_4_);
        if (-1 < (int)DVar26) goto switchD_0040148a_caseD_42;
        if (DVar26 == 0xfffffffe) {
          FUN_004065b9((LPWSTR)&DAT_0040a5c8,-0x17);
          lstrcatW((LPWSTR)&DAT_0040a5c8,(LPCWSTR)local_c);
        }
        else {
          FUN_004065b9((LPWSTR)&DAT_0040a5c8,-0x12);
        }
        uVar30 = 0x200010;
        puVar7 = &DAT_0040a5c8;
        goto LAB_004023c4;
      }
      if (param_1 != (HWND)0x0) {
        FUN_00405601(-0x1e,(LPCWSTR)local_c);
        bVar27 = param_1 == (HWND)0x2;
        goto LAB_004015db;
      }
      FUN_0040657c((LPWSTR)&DAT_0040b5c8,(LPCWSTR)&DAT_0042a000);
      FUN_0040657c((LPWSTR)&DAT_0042a000,(LPCWSTR)&DAT_0040a5c8);
      FUN_004065b9((LPWSTR)&DAT_0040adc8,(int)local_20);
      FUN_0040657c((LPWSTR)&DAT_0042a000,(LPCWSTR)&DAT_0040b5c8);
      iVar19 = FUN_00405bdc(&DAT_0040adc8,(int)local_34[0] >> 3);
    } while (iVar19 == 4);
    if (iVar19 != 5) {
      pWVar20 = (LPCWSTR)&DAT_0040a5c8;
      local_34[0] = (HWND)0xfffffffa;
      goto LAB_00401493;
    }
    _DAT_00429aa8 = _DAT_00429aa8 + 1;
    goto LAB_00402c5f;
  case 0x15:
    uVar30 = 0;
    goto LAB_0040196f;
  case 0x16:
    pWVar20 = FUN_00402dd2(0x31);
    pHVar15 = (HWND)FUN_00405bdc(pWVar20,(uint)local_34[0]);
    if (pHVar15 == (HWND)0x0) goto LAB_0040295a;
    if (pHVar15 == local_2c) {
      return (HWND)local_28.dwLowDateTime;
    }
    if (pHVar15 == (HWND)local_28.dwHighDateTime) {
      return local_20;
    }
    break;
  case 0x17:
    uVar30 = 0xfffffff0;
LAB_0040196f:
    pWVar20 = FUN_00402dd2(uVar30);
    FUN_00405c88(pWVar20,(uint)local_34[1]);
    break;
  case 0x18:
    pWVar20 = FUN_00402dd2(1);
    pHVar15 = (HWND)lstrlenW(pWVar20);
    goto switchD_00401b07_default;
  case 0x19:
    local_18 = FUN_00402db0(2);
    local_40 = FUN_00402db0(3);
    pHVar15 = (HWND)local_40;
    param_1 = (HWND)local_18;
    local_48 = FUN_00402dd2(1);
    pHVar4 = (HWND)lstrlenW(local_48);
    *(undefined2 *)&pHVar24->unused = 0;
    if (local_18._4_4_ == (HWND)0x0) {
      param_1 = pHVar4;
    }
    if ((param_1 != (HWND)0x0) &&
       ((-1 < (int)local_40 ||
        (pHVar15 = (HWND)((int)local_40 + (int)&pHVar4->unused), -1 < (int)pHVar15)))) {
      if ((int)pHVar4 < (int)pHVar15) {
        pHVar15 = pHVar4;
      }
      FUN_0040657c((LPWSTR)pHVar24,local_48 + (int)pHVar15);
      if ((int)param_1 < 0) {
        iVar19 = lstrlenW((LPCWSTR)pHVar24);
        param_1 = (HWND)((int)&param_1->unused + iVar19);
        if ((int)param_1 < 0) {
          param_1 = (HWND)0x0;
        }
      }
      if ((int)param_1 < 0x400) {
        *(undefined2 *)((int)&pHVar24->unused + (int)param_1 * 2) = 0;
      }
    }
    break;
  case 0x1a:
    pWVar20 = FUN_00402dd2(0x20);
    pWVar8 = FUN_00402dd2(0x31);
    if ((HWND)local_28.dwHighDateTime == (HWND)0x0) {
      puVar7 = (undefined *)lstrcmpiW(pWVar20,pWVar8);
    }
    else {
      puVar7 = (undefined *)lstrcmpW(pWVar20,pWVar8);
    }
    goto joined_r0x00401a4a;
  case 0x1b:
    param_1 = (HWND)FUN_00402dd2(1);
    DVar26 = ExpandEnvironmentStringsW((LPCWSTR)param_1,(LPWSTR)pHVar24,0x400);
    if ((DVar26 == 0) ||
       ((local_2c != (HWND)0x0 &&
        (iVar14 = lstrcmpW((LPCWSTR)param_1,(LPCWSTR)pHVar24), iVar14 == 0)))) {
      local_8 = (HWND)0x1;
      *(undefined2 *)&pHVar24->unused = 0;
    }
    *(undefined2 *)(&DAT_0042a7fe + iVar19) = 0;
    break;
  case 0x1c:
    uVar29 = FUN_00402db0(0);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    uVar30 = (uint)uVar29;
    uVar5 = FUN_00402db0(1);
    if (local_20 != (HWND)0x0) {
      if (uVar30 < uVar5) {
        return (HWND)local_28.dwLowDateTime;
      }
      if (uVar30 <= uVar5) {
        return local_2c;
      }
      return (HWND)local_28.dwHighDateTime;
    }
    if ((int)uVar30 < (int)uVar5) {
      return (HWND)local_28.dwLowDateTime;
    }
    if ((int)uVar30 <= (int)uVar5) {
      return local_2c;
    }
    return (HWND)local_28.dwHighDateTime;
  case 0x1d:
    uVar29 = FUN_00402db0(1);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    pHVar4 = (HWND)uVar29;
    param_1 = pHVar4;
    uVar29 = FUN_00402db0(2);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    uVar30 = (uint)uVar29;
    bVar18 = (byte)uVar29;
    pHVar15 = param_1;
    switch(local_28.dwLowDateTime) {
    case 0:
      pHVar15 = (HWND)((int)&pHVar4->unused + uVar30);
      break;
    case 1:
      pHVar15 = (HWND)((int)pHVar4 - uVar30);
      break;
    case 2:
      pHVar15 = (HWND)(uVar30 * (int)pHVar4);
      break;
    case 3:
      if (uVar30 == 0) {
LAB_00401b78:
        local_8 = (HWND)0x1;
        pHVar15 = (HWND)0x0;
      }
      else {
        pHVar15 = (HWND)((int)pHVar4 / (int)uVar30);
      }
      break;
    case 4:
      pHVar15 = (HWND)(uVar30 | (uint)pHVar4);
      break;
    case 5:
      pHVar15 = (HWND)(uVar30 & (uint)pHVar4);
      break;
    case 6:
      pHVar15 = (HWND)(uVar30 ^ (uint)pHVar4);
      break;
    case 7:
      pHVar15 = (HWND)(uint)(pHVar4 == (HWND)0x0);
      break;
    case 8:
      if (pHVar4 == (HWND)0x0) {
LAB_00401b5c:
        if (uVar30 == 0) goto LAB_00401b51;
      }
      pHVar15 = (HWND)0x1;
      break;
    case 9:
      if (pHVar4 != (HWND)0x0) goto LAB_00401b5c;
LAB_00401b51:
      pHVar15 = (HWND)0x0;
      break;
    case 10:
      if (uVar30 == 0) goto LAB_00401b78;
      pHVar15 = (HWND)((int)pHVar4 % (int)uVar30);
      break;
    case 0xb:
      pHVar15 = (HWND)((int)pHVar4 << (bVar18 & 0x1f));
      break;
    case 0xc:
      pHVar15 = (HWND)((int)pHVar4 >> (bVar18 & 0x1f));
      break;
    case 0xd:
      pHVar15 = (HWND)((uint)pHVar4 >> (bVar18 & 0x1f));
    }
    goto switchD_00401b07_default;
  case 0x1e:
    pWVar20 = FUN_00402dd2(1);
    uVar29 = FUN_00402db0(2);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    wsprintfW((LPWSTR)pHVar24,pWVar20,(int)uVar29);
    break;
  case 0x1f:
    if (local_2c == (HWND)0x0) {
      if (local_34[1] != (HWND)0x0) {
        if (DAT_0040ce28 != (HWND)0x0) {
          FUN_0040657c((LPWSTR)pHVar24,(LPCWSTR)(DAT_0040ce28 + 1));
          DAT_0040ce28 = (HWND)pHVar15->unused;
          goto LAB_00401c37;
        }
        goto LAB_0040295a;
      }
      pHVar15 = (HWND)GlobalAlloc(0x40,0x804);
      FUN_004065b9((LPWSTR)(pHVar15 + 1),(int)local_34[0]);
      pHVar15->unused = (int)DAT_0040ce28;
      DAT_0040ce28 = pHVar15;
    }
    else {
      do {
        local_2c = (HWND)((int)&local_2c[-1].unused + 3);
        if (pHVar15 == (HWND)0x0) goto LAB_004023b6;
        pHVar15 = (HWND)pHVar15->unused;
      } while (local_2c != (HWND)0x0);
      if (pHVar15 == (HWND)0x0) goto LAB_004023b6;
      FUN_0040657c((LPWSTR)&DAT_0040a5c8,(LPCWSTR)(pHVar15 + 1));
      FUN_0040657c((LPWSTR)(pHVar15 + 1),(LPCWSTR)(DAT_0040ce28 + 1));
      pWVar21 = (WCHAR *)&DAT_0040a5c8;
      pHVar24 = DAT_0040ce28 + 1;
LAB_00402ac0:
      FUN_0040657c((LPWSTR)pHVar24,pWVar21);
    }
    break;
  case 0x20:
  case 0x21:
    uVar29 = FUN_00402db0(3);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    local_1c = (HWND)uVar29;
    uVar29 = FUN_00402db0(4);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    param_1 = (HWND)uVar29;
    if (((uint)local_20 & 1) != 0) {
      local_1c = (HWND)FUN_00402dd2(0x33);
      uVar29 = CONCAT44(local_18._4_4_,param_1);
    }
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    param_1 = (HWND)uVar29;
    if (((uint)local_20 & 2) != 0) {
      pWVar20 = FUN_00402dd2(0x44);
      uVar29 = CONCAT44(local_18._4_4_,pWVar20);
    }
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    param_1 = (HWND)uVar29;
    if (local_38 == 0x21) {
      uVar29 = FUN_00402db0(1);
      local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
      uVar28 = FUN_00402db0(2);
      local_18._4_4_ = (HWND)((ulonglong)uVar28 >> 0x20);
      if ((int)local_20 >> 2 == 0) {
        pHVar15 = (HWND)SendMessageW((HWND)uVar29,(UINT)uVar28,(WPARAM)local_1c,(LPARAM)param_1);
        local_40._4_4_ = pHVar15;
        local_34[1] = local_34[0];
      }
      else {
        LVar6 = SendMessageTimeoutW((HWND)uVar29,(UINT)uVar28,(WPARAM)local_1c,(LPARAM)param_1,0,
                                    (int)local_20 >> 2,(PDWORD_PTR)((int)&local_40 + 4));
        local_8 = (HWND)(uint)(LVar6 == 0);
        pHVar15 = local_40._4_4_;
        local_34[1] = local_34[0];
      }
    }
    else {
      pWVar20 = FUN_00402dd2(1);
      pWVar8 = FUN_00402dd2(0x12);
      pHVar15 = FindWindowExW(local_1c,param_1,(LPCWSTR)(-(uint)(*pWVar20 != L'\0') & (uint)pWVar20)
                              ,(LPCWSTR)(-(uint)(*pWVar8 != L'\0') & (uint)pWVar8));
      local_40._4_4_ = pHVar15;
      local_34[1] = local_34[0];
    }
    goto joined_r0x004028e4;
  case 0x22:
    uVar29 = FUN_00402db0(0);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    puVar7 = (undefined *)IsWindow((HWND)uVar29);
    local_28.dwLowDateTime = (DWORD)local_34[1];
joined_r0x00401a4a:
    if (puVar7 == (undefined *)0x0) {
      return local_2c;
    }
    return (HWND)local_28.dwLowDateTime;
  case 0x23:
    uVar29 = FUN_00402db0(2);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    uVar28 = FUN_00402db0(1);
    local_18._4_4_ = (HWND)((ulonglong)uVar28 >> 0x20);
    pHVar15 = GetDlgItem((HWND)uVar28,(int)uVar29);
    goto switchD_00401b07_default;
  case 0x24:
    iVar19 = (int)&local_34[1]->unused + DAT_00429a68;
    uVar29 = FUN_00402db0(0);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    SetWindowLongW((HWND)uVar29,-0x15,iVar19);
    break;
  case 0x25:
    if ((local_28.dwLowDateTime & 0x100) == 0) {
      pHVar15 = GetDlgItem(DAT_00429a28,(int)local_2c);
      uVar29 = CONCAT44(local_18._4_4_,pHVar15);
    }
    else {
      uVar29 = FUN_00402db0(2);
    }
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    param_1 = (HWND)uVar29;
    local_40._4_4_ = (HWND)(local_28.dwLowDateTime & 3);
    uVar30 = local_28.dwLowDateTime & 4;
    local_1c = (HWND)(local_28.dwLowDateTime >> 0x1f);
    local_44 = (FARPROC)(local_28.dwLowDateTime >> 0x1e & 1);
    if ((local_28.dwLowDateTime & 0x10000) == 0) {
      local_48 = (LPCWSTR)((uint)local_34[1] & 0xffff);
    }
    else {
      local_48 = FUN_00402dd2(0x11);
      uVar29 = CONCAT44(local_18._4_4_,param_1);
    }
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    param_1 = (HWND)uVar29;
    GetClientRect(param_1,(LPRECT)local_64);
    pHVar15 = (HWND)LoadImageW((HINSTANCE)(-(uint)(uVar30 != 0) & DAT_00429a20),local_48,
                               (UINT)local_40._4_4_,
                               CONCAT22(local_64._10_2_,local_64._8_2_) * (int)local_1c,
                               CONCAT22(auStack_56,auStack_58) * (int)local_44,
                               local_28.dwLowDateTime & 0xfef0);
    ho = (HGDIOBJ)SendMessageW(param_1,0x172,(WPARAM)local_40._4_4_,(LPARAM)pHVar15);
    local_34[1] = local_34[0];
    if ((ho != (HGDIOBJ)0x0) && (local_40._4_4_ == (HWND)0x0)) {
      DeleteObject(ho);
      local_34[1] = local_34[0];
    }
joined_r0x004028e4:
    if (-1 < (int)local_34[1]) goto switchD_00401b07_default;
    break;
  case 0x26:
    hdc = GetDC(DAT_00429a28);
    uVar29 = FUN_00402db0(2);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    iVar14 = 0x48;
    iVar19 = GetDeviceCaps(hdc,0x5a);
    _DAT_0040cdc8 = MulDiv((int)uVar29,iVar19,iVar14);
    _DAT_0040cdc8 = -_DAT_0040cdc8;
    ReleaseDC(local_c,hdc);
    uVar29 = FUN_00402db0(3);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    _DAT_0040cdd8 = (undefined4)uVar29;
    DAT_0040cddc = (byte)local_28.dwHighDateTime & 1;
    DAT_0040cddf = 1;
    DAT_0040cddd = (byte)local_28.dwHighDateTime & 2;
    DAT_0040cdde = (byte)local_28.dwHighDateTime & 4;
    FUN_004065b9((LPWSTR)&DAT_0040cde4,(int)local_34[1]);
    pHVar15 = (HWND)CreateFontIndirectW((LOGFONTW *)&DAT_0040cdc8);
    goto switchD_00401b07_default;
  case 0x27:
    uVar29 = FUN_00402db0(0);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    uVar28 = FUN_00402db0(1);
    local_18._4_4_ = (HWND)((ulonglong)uVar28 >> 0x20);
    if ((HWND)local_28.dwLowDateTime == (HWND)0x0) {
      ShowWindow((HWND)uVar29,(int)uVar28);
    }
    else {
      EnableWindow((HWND)uVar29,(int)uVar28);
    }
    break;
  case 0x28:
    pWVar20 = FUN_00402dd2(0);
    pWVar8 = FUN_00402dd2(0x31);
    pWVar25 = FUN_00402dd2(0x22);
    FUN_00402dd2(0x15);
    FUN_00401423(-0x14);
    local_90._4_4_ = local_28.dwHighDateTime;
    local_90._8_4_ = local_c;
    local_90._28_4_ = local_28.dwLowDateTime;
    local_90._12_4_ = -(uint)(*pWVar20 != L'\0') & (uint)pWVar20;
    local_90._24_4_ = &DAT_00435000;
    local_90._20_4_ = -(uint)(*pWVar25 != L'\0') & (uint)pWVar25;
    local_90._16_4_ = pWVar8;
    iVar19 = FUN_00405ba2((SHELLEXECUTEINFOW *)local_90);
    if (iVar19 == 0) goto LAB_0040295a;
    if ((local_90._4_4_ & 0x40) != 0) {
      FUN_00406a1b((HANDLE)CONCAT22(auStack_56,auStack_58));
      pvVar11 = (HANDLE)CONCAT22(auStack_56,auStack_58);
      goto LAB_00402017;
    }
    break;
  case 0x29:
    pWVar20 = FUN_00402dd2(0);
    FUN_00405601(-0x15,pWVar20);
    pvVar11 = FUN_00405b5f(pWVar20);
    if (pvVar11 == (HANDLE)0x0) goto LAB_0040295a;
    if (local_2c != (HWND)0x0) {
      DVar26 = FUN_00406a1b(pvVar11);
      if ((int)local_34[1] < 0) {
        if (DVar26 != 0) {
          local_8 = (HWND)0x1;
        }
      }
      else {
        FUN_004064c3((LPWSTR)local_10,DVar26);
      }
    }
LAB_00402017:
    CloseHandle(pvVar11);
    break;
  case 0x2a:
    pWVar20 = FUN_00402dd2(2);
    puVar7 = FUN_004068d9(pWVar20);
    if (puVar7 != (undefined *)0x0) {
      FUN_004064c3((LPWSTR)local_10,*(undefined4 *)(puVar7 + 0x14));
      pHVar15 = *(HWND *)(puVar7 + 0x18);
      goto switchD_00401b07_default;
    }
    *(undefined2 *)&pHVar24->unused = 0;
    *(undefined2 *)&local_10->unused = 0;
    goto LAB_0040295a;
  case 0x2b:
    pHVar15 = (HWND)FUN_00402dd2(0xffffffee);
    iVar19 = (int)&local_18 + 4;
    local_40._4_4_ = pHVar15;
    pFVar16 = FUN_00406970(0xb);
    dwBytes = (*pFVar16)(pHVar15,iVar19);
    *(undefined2 *)&pHVar24->unused = 0;
    *(undefined2 *)&local_10->unused = 0;
    local_8 = (HWND)0x1;
    if ((dwBytes != 0) && (param_1 = (HWND)GlobalAlloc(0x40,dwBytes), param_1 != (HWND)0x0)) {
      local_44 = FUN_00406970(0xc);
      local_1c = (HWND)FUN_00406970(0xd);
      iVar19 = (*local_44)(local_40._4_4_,0,dwBytes,param_1);
      pHVar15 = param_1;
      if ((iVar19 != 0) &&
         (iVar19 = (*(code *)local_1c)(param_1,&DAT_0040a014,&local_48,local_50), pHVar15 = param_1,
         iVar19 != 0)) {
        FUN_004064c3((LPWSTR)pHVar24,*(undefined4 *)(local_48 + local_28.dwLowDateTime * 2 + 4));
        FUN_004064c3((LPWSTR)local_10,*(undefined4 *)(local_48 + local_28.dwLowDateTime * 2 + 6));
        local_8 = (HWND)0x0;
        pHVar15 = param_1;
      }
LAB_00401c37:
      GlobalFree(pHVar15);
    }
    break;
  case 0x2c:
    local_8 = (HWND)0x1;
    if (DAT_00429ae0 < 0) {
      iVar19 = -0x19;
    }
    else {
      pWVar20 = FUN_00402dd2(0xfffffff0);
      local_48 = FUN_00402dd2(1);
      if ((((HWND)local_28.dwHighDateTime != (HWND)0x0) &&
          (param_1 = (HWND)GetModuleHandleW(pWVar20), param_1 != (HWND)0x0)) ||
         (param_1 = (HWND)LoadLibraryExW(pWVar20,(HANDLE)0x0,8), param_1 != (HWND)0x0)) {
        pFVar16 = FUN_004069df((HMODULE)param_1,local_48);
        if (pFVar16 == (FARPROC)0x0) {
          FUN_00405601(-9,local_48);
        }
        else {
          local_8 = (HWND)0x0;
          if (local_2c == (HWND)0x0) {
            (*pFVar16)(local_c,0x400,&DAT_0042a000,&DAT_0040ce28,&PTR_DAT_0040a000);
          }
          else {
            FUN_00401423((int)local_2c);
            iVar19 = (*pFVar16)();
            if (iVar19 != 0) {
              local_8 = (HWND)0x1;
            }
          }
        }
        if (((HWND)local_28.dwLowDateTime == (HWND)0x0) &&
           (iVar19 = FUN_00403bee((int)param_1), iVar19 != 0)) {
          FreeLibrary((HMODULE)param_1);
        }
        break;
      }
      iVar19 = -10;
      param_1 = (HWND)0x0;
    }
    goto LAB_0040231d;
  case 0x2d:
    local_18._4_4_ = (HWND)FUN_00402dd2(0xfffffff0);
    local_48 = FUN_00402dd2(0xffffffdf);
    local_c = (HWND)FUN_00402dd2(2);
    local_50[0] = (FARPROC)FUN_00402dd2(0xffffffcd);
    local_10 = (HWND)FUN_00402dd2(0x45);
    local_54 = local_28.dwHighDateTime & 0xfff;
    local_44 = (FARPROC)((int)local_28.dwHighDateTime >> 0x10 & 0xffff);
    uVar30 = (int)local_28.dwHighDateTime >> 0xc & 7;
    iVar19 = FUN_00405ec2((ushort *)local_48);
    if (iVar19 == 0) {
      FUN_00402dd2(0x21);
    }
    HVar17 = CoCreateInstance((IID *)&DAT_004084dc,(LPUNKNOWN)0x0,1,(IID *)&DAT_004084cc,&param_1);
    if (-1 < HVar17) {
      local_1c = (HWND)(**(code **)param_1->unused)(param_1,&DAT_004084ec,(int)&local_40 + 4);
      if (-1 < (int)local_1c) {
        local_1c = (HWND)(**(code **)(param_1->unused + 0x50))(param_1,local_48);
        if ((local_28.dwHighDateTime & 0x8000) == 0) {
          (**(code **)(param_1->unused + 0x24))(param_1,&DAT_00435000);
        }
        if (uVar30 != 0) {
          (**(code **)(param_1->unused + 0x3c))(param_1,uVar30);
        }
        (**(code **)(param_1->unused + 0x34))(param_1,local_44);
        if (*(WCHAR *)local_50[0] != L'\0') {
          (**(code **)(param_1->unused + 0x44))(param_1,local_50[0],local_54);
        }
        (**(code **)(param_1->unused + 0x2c))(param_1,local_c);
        (**(code **)(param_1->unused + 0x1c))(param_1,local_10);
        if (-1 < (int)local_1c) {
          local_1c = (HWND)(**(code **)((local_40._4_4_)->unused + 0x18))
                                     (local_40._4_4_,local_18._4_4_,1);
        }
        (**(code **)((local_40._4_4_)->unused + 8))(local_40._4_4_);
      }
      (**(code **)(param_1->unused + 8))(param_1);
      if (-1 < (int)local_1c) {
        iVar19 = -0xc;
        goto LAB_0040231d;
      }
    }
    local_8 = (HWND)0x1;
    iVar19 = -0x10;
    goto LAB_0040231d;
  case 0x2e:
    pWVar20 = FUN_00402dd2(0);
    pWVar8 = FUN_00402dd2(0x11);
    param_1 = (HWND)FUN_00402dd2(0x23);
    puVar7 = FUN_004068d9(pWVar20);
    if (puVar7 != (undefined *)0x0) {
      local_90._28_4_ = local_c;
      local_70 = (HINSTANCE)0x2;
      iVar19 = lstrlenW(pWVar20);
      pWVar20[iVar19 + 1] = L'\0';
      iVar19 = lstrlenW(pWVar8);
      pWVar8[iVar19 + 1] = L'\0';
      local_64._10_2_ = SUB42(param_1,0);
      auStack_58 = SUB42((uint)param_1 >> 0x10,0);
      local_64._0_2_ = local_2c._0_2_;
      local_6c = pWVar20;
      local_68 = pWVar8;
      FUN_00405601(0,(LPCWSTR)param_1);
      iVar19 = SHFileOperationW((LPSHFILEOPSTRUCTW)(local_90 + 0x1c));
      if (iVar19 == 0) break;
    }
    FUN_00405601(-7,(LPCWSTR)0x0);
    goto LAB_0040295a;
  case 0x2f:
    if (local_34[0] != (HWND)0xbadf00d) {
LAB_004023b6:
      uVar30 = 0x200010;
      puVar7 = (undefined *)FUN_004065b9((LPWSTR)0x0,-0x18);
LAB_004023c4:
      FUN_00405bdc(puVar7,uVar30);
      return (HWND)0x7fffffff;
    }
    DAT_00429ab4 = DAT_00429ab4 + 1;
    break;
  case 0x30:
    pWVar8 = (LPCWSTR)0x0;
    pWVar25 = (LPCWSTR)0x0;
    if (local_34[0] != (HWND)0x0) {
      pWVar8 = FUN_00402dd2(0);
    }
    if (local_34[1] != (HWND)0x0) {
      pWVar25 = FUN_00402dd2(0x11);
    }
    if ((HWND)local_28.dwHighDateTime != (HWND)0x0) {
      pWVar20 = FUN_00402dd2(0x22);
    }
    lpFileName = FUN_00402dd2(0xffffffcd);
    pWVar12 = (LPWSTR)WritePrivateProfileStringW(pWVar8,pWVar25,pWVar20,lpFileName);
LAB_004015d9:
    bVar27 = pWVar12 == (LPWSTR)0x0;
LAB_004015db:
    if (bVar27) goto LAB_0040295a;
    break;
  case 0x31:
    param_1 = DAT_0040a010;
    pWVar20 = FUN_00402dd2(1);
    local_18._4_4_ = (HWND)FUN_00402dd2(0x12);
    pWVar8 = FUN_00402dd2(0xffffffdd);
    GetPrivateProfileStringW
              (pWVar20,(LPCWSTR)local_18._4_4_,(LPCWSTR)&param_1,(LPWSTR)pHVar24,0x3ff,pWVar8);
    bVar27 = (short)pHVar24->unused == 10;
LAB_0040177d:
    if (bVar27) {
LAB_00402928:
      local_8 = (HWND)0x1;
      *(undefined2 *)&pHVar24->unused = 0;
    }
    break;
  case 0x32:
    if ((HWND)local_28.dwHighDateTime == (HWND)0x0) {
      pHVar9 = (HKEY)FUN_00402e12((HKEY)0x2);
      if (pHVar9 == (HKEY)0x0) goto LAB_0040295a;
      pWVar20 = FUN_00402dd2(0x33);
      LVar10 = RegDeleteValueW(pHVar9,pWVar20);
      RegCloseKey(pHVar9);
    }
    else {
      pWVar20 = FUN_00402dd2(0x22);
      LVar10 = FUN_00402e90((int)local_34[1],pWVar20,(int)local_28.dwHighDateTime >> 1);
    }
    if (LVar10 != 0) goto LAB_0040295a;
    break;
  case 0x33:
    local_18._4_4_ = local_20;
    local_48 = FUN_00402dd2(2);
    pWVar20 = FUN_00402dd2(0x11);
    local_8 = (HWND)0x1;
    param_1 = (HWND)FUN_00402e62((int)local_34[0],pWVar20,(HKEY)0x2);
    if (param_1 != (HWND)0x0) {
      DVar26 = 0;
      if ((HWND)local_28.dwHighDateTime == (HWND)0x1) {
        FUN_00402dd2(0x23);
        iVar19 = lstrlenW((LPCWSTR)&DAT_0040b5c8);
        DVar26 = iVar19 * 2 + 2;
      }
      uVar29 = CONCAT44(local_40._4_4_,_DAT_0040b5c8);
      if ((HWND)local_28.dwHighDateTime == (HWND)0x4) {
        uVar29 = FUN_00402db0(3);
        DVar26 = 4;
      }
      local_40._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
      _DAT_0040b5c8 = (undefined4)uVar29;
      if ((HWND)local_28.dwHighDateTime == (HWND)0x3) {
        DVar26 = FUN_00403314(local_28.dwLowDateTime,(HANDLE)0x0,&DAT_0040b5c8,0x1800);
        uVar29 = CONCAT44(local_40._4_4_,_DAT_0040b5c8);
      }
      local_40._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
      _DAT_0040b5c8 = (undefined4)uVar29;
      LVar10 = RegSetValueExW((HKEY)param_1,local_48,0,(DWORD)local_18._4_4_,&DAT_0040b5c8,DVar26);
      pHVar9 = (HKEY)param_1;
      if (LVar10 == 0) {
        local_8 = (HWND)0x0;
      }
LAB_00402629:
      RegCloseKey(pHVar9);
    }
    break;
  case 0x34:
    pHVar9 = (HKEY)FUN_00402e12((HKEY)0x20019);
    pWVar20 = FUN_00402dd2(0x33);
    *(undefined2 *)&pHVar24->unused = 0;
    if (pHVar9 != (HKEY)0x0) {
      local_18._4_4_ = (HWND)0x800;
      LVar10 = RegQueryValueExW(pHVar9,pWVar20,(LPDWORD)0x0,(LPDWORD)&param_1,(LPBYTE)pHVar24,
                                (LPDWORD)((int)&local_18 + 4));
      if (LVar10 == 0) {
        if (param_1 == (HWND)0x4) {
          local_8 = (HWND)(uint)((HWND)local_28.dwHighDateTime == (HWND)0x0);
          FUN_004064c3((LPWSTR)pHVar24,pHVar24->unused);
          goto LAB_00402629;
        }
        if ((param_1 == (HWND)0x1) || (param_1 == (HWND)0x2)) {
          local_8 = (HWND)local_28.dwHighDateTime;
          goto LAB_00402621;
        }
      }
      *(undefined2 *)&pHVar24->unused = 0;
      local_8 = (HWND)0x1;
      goto LAB_00402629;
    }
    goto LAB_0040295a;
  case 0x35:
    pHVar9 = (HKEY)FUN_00402e12((HKEY)0x20019);
    uVar29 = FUN_00402db0(3);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    *(undefined2 *)&pHVar24->unused = 0;
    if (pHVar9 != (HKEY)0x0) {
      param_1 = (HWND)0x3ff;
      if ((HWND)local_28.dwHighDateTime == (HWND)0x0) {
        LVar10 = RegEnumValueW(pHVar9,(DWORD)uVar29,(LPWSTR)pHVar24,(LPDWORD)&param_1,(LPDWORD)0x0,
                               (LPDWORD)0x0,(LPBYTE)0x0,(LPDWORD)0x0);
        if (LVar10 != 0) {
          local_8 = (HWND)0x1;
        }
      }
      else {
        RegEnumKeyW(pHVar9,(DWORD)uVar29,(LPWSTR)pHVar24,0x3ff);
      }
LAB_00402621:
      *(undefined2 *)(&DAT_0042a7fe + iVar19) = 0;
      goto LAB_00402629;
    }
    goto LAB_0040295a;
  case 0x36:
    pvVar11 = (HANDLE)FUN_004064dc((ushort *)pHVar24);
    if (pvVar11 != (HANDLE)0x0) goto LAB_00402017;
    break;
  case 0x37:
    pWVar20 = FUN_00402dd2(0xffffffed);
    pHVar15 = (HWND)FUN_0040606c(pWVar20,(DWORD)local_34[1],(DWORD)local_2c);
    if (pHVar15 == (HWND)0xffffffff) goto LAB_00402957;
switchD_00401b07_default:
    FUN_004064c3((LPWSTR)pHVar24,pHVar15);
    break;
  case 0x38:
  case 0x44:
    local_18._4_4_ = local_2c;
    if (local_2c == (HWND)0x0) {
      if (local_38 == 0x38) {
        FUN_00402dd2(0x21);
        FUN_0040659e((LPCWSTR)&DAT_0040b5c8,&DAT_0040adc8,0x400);
        param_1 = (HWND)lstrlenA(&DAT_0040adc8);
      }
      else {
        pWVar20 = FUN_00402dd2(0x11);
        iVar19 = lstrlenW(pWVar20);
        param_1 = (HWND)(iVar19 * 2);
      }
    }
    else {
      _DAT_0040adc8 = FUN_00402db0(1);
      param_1 = (HWND)((local_38 != 0x38) + 1);
      local_48 = extraout_EDX;
    }
    if (((short)pHVar24->unused != 0) &&
       (((pvVar11 = (HANDLE)FUN_004064dc((ushort *)pHVar24),
         local_38 == 0x38 || local_18._4_4_ != (HWND)0x0 ||
         ((HWND)local_28.dwLowDateTime == (HWND)0x0)) ||
        (iVar19 = FUN_0040614d(pvVar11,(int)pvVar11), -1 < iVar19)))) {
      pWVar12 = (LPWSTR)FUN_0040611e(pvVar11,&DAT_0040adc8,(DWORD)param_1);
      goto LAB_004015d9;
    }
    goto LAB_0040295a;
  case 0x39:
  case 0x45:
    local_c = (HWND)0x0;
    local_50[0] = (FARPROC)0x2;
    uVar29 = FUN_00402db0(2);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    local_48 = (LPCWSTR)uVar29;
    if ((int)local_48 < 1) break;
    if (0x3ff < (int)local_48) {
      local_48 = (LPCWSTR)0x3ff;
    }
    if ((short)pHVar24->unused != 0) {
      local_40._4_4_ = (HWND)0x0;
      local_1c = (HWND)FUN_004064dc((ushort *)pHVar24);
      if (0 < (int)local_48) {
        do {
          if (local_38 == 0x39) {
            BVar13 = ReadFile(local_1c,(LPVOID)((int)&param_1 + 2),2 - local_28.dwLowDateTime,
                              (LPDWORD)&local_44,(LPOVERLAPPED)0x0);
            if ((BVar13 != 0) && (local_44 != (FARPROC)0x0)) {
              local_54 = CONCAT22((short)((uint)BVar13 >> 0x10),(ushort)param_1._2_1_);
              local_50[0] = local_44;
              if ((HWND)local_28.dwLowDateTime == (HWND)0x0) {
                iVar19 = MultiByteToWideChar(0,8,(LPCSTR)((int)&param_1 + 2),(int)local_44,
                                             (LPWSTR)&local_54,1);
                if (iVar19 == 0) {
                  iVar19 = -(int)local_50[0];
                  do {
                    local_44 = local_44 + -1;
                    local_54 = 0xfffd;
                    if (local_44 == (FARPROC)0x0) break;
                    local_50[0] = local_50[0] + -1;
                    iVar19 = iVar19 + 1;
                    SetFilePointer(local_1c,iVar19,(PLONG)0x0,1);
                    iVar14 = MultiByteToWideChar(0,8,(LPCSTR)((int)&param_1 + 2),(int)local_44,
                                                 (LPWSTR)&local_54,1);
                  } while (iVar14 == 0);
                }
                goto LAB_00402830;
              }
LAB_00402866:
              FUN_004064c3((LPWSTR)local_10,local_54 & 0xffff);
              goto LAB_00402c5f;
            }
            break;
          }
          if (((((HWND)local_28.dwLowDateTime == (HWND)0x0) && (local_c == (HWND)0x0)) &&
              (iVar19 = FUN_0040614d(local_1c,0), iVar19 < 0)) ||
             (iVar19 = FUN_004060ef(local_1c,&local_54,2), iVar19 == 0)) break;
LAB_00402830:
          if ((HWND)local_28.dwLowDateTime != (HWND)0x0) goto LAB_00402866;
          sVar1 = (short)local_54;
          if ((local_40._4_2_ == 0xd) || (local_40._4_2_ == 10)) {
            if ((local_40._4_2_ == sVar1) || ((sVar1 != 0xd && (sVar1 != 10)))) {
              SetFilePointer(local_1c,-(int)local_50[0],(PLONG)0x0,1);
            }
            else {
              *(short *)((int)&local_10->unused + (int)local_c * 2) = sVar1;
              local_c = (HWND)((int)local_c + 1);
            }
            break;
          }
          iVar19 = (int)local_c + 1;
          *(short *)((int)&local_10->unused + (int)local_c * 2) = sVar1;
          local_c = (HWND)iVar19;
          if ((sVar1 == 0) || (local_40._4_4_ = (HWND)local_54, (int)local_48 <= iVar19)) break;
        } while( true );
      }
    }
    bVar27 = local_c == (HWND)0x0;
    *(undefined2 *)((int)&local_10->unused + (int)local_c * 2) = 0;
    goto LAB_004015db;
  case 0x3a:
    if ((short)pHVar24->unused != 0) {
      uVar29 = FUN_00402db0(2);
      local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
      lDistanceToMove = (LONG)uVar29;
      lpDistanceToMoveHigh = (PLONG)0x0;
      pvVar11 = (HANDLE)FUN_004064dc((ushort *)pHVar24);
      pHVar15 = (HWND)SetFilePointer(pvVar11,lDistanceToMove,lpDistanceToMoveHigh,
                                     local_28.dwLowDateTime);
      pHVar24 = local_10;
      goto joined_r0x004028e4;
    }
    break;
  case 0x3b:
    pvVar11 = (HANDLE)FUN_004064dc((ushort *)pHVar24);
    if (pvVar11 != (HANDLE)0x0) {
      FindClose(pvVar11);
    }
    break;
  case 0x3c:
    pvVar11 = (HANDLE)FUN_004064dc((ushort *)local_10);
    if ((pvVar11 != (HANDLE)0x0) && (BVar13 = FindNextFileW(pvVar11,&local_2e0), BVar13 != 0)) {
LAB_0040296f:
      pWVar21 = local_2e0.cFileName;
      goto LAB_00402ac0;
    }
    goto LAB_00402928;
  case 0x3d:
    pWVar20 = FUN_00402dd2(2);
    pvVar11 = FindFirstFileW(pWVar20,&local_2e0);
    if (pvVar11 != (HANDLE)0xffffffff) {
      FUN_004064c3((LPWSTR)local_10,pvVar11);
      goto LAB_0040296f;
    }
    *(undefined2 *)&local_10->unused = 0;
LAB_00402957:
    *(undefined2 *)&pHVar24->unused = 0;
LAB_0040295a:
    local_8 = (HWND)0x1;
    break;
  case 0x3e:
    DVar26 = 0xfffffd66;
    pFVar16 = (FARPROC)FUN_00402dd2(0xfffffff0);
    local_44 = pFVar16;
    iVar19 = FUN_00405ec2((ushort *)pFVar16);
    if (iVar19 == 0) {
      FUN_00402dd2(0xffffffed);
    }
    FUN_00406047((LPCWSTR)pFVar16);
    param_1 = (HWND)FUN_0040606c((LPCWSTR)pFVar16,0x40000000,2);
    if (param_1 != (HWND)0xffffffff) {
      local_40._4_4_ = local_34[1];
      if (local_2c != (HWND)0x0) {
        local_48 = DAT_00429a34;
        hMem = GlobalAlloc(0x40,(SIZE_T)DAT_00429a34);
        if (hMem != (HGLOBAL)0x0) {
          FUN_0040350f(0);
          FUN_004034f9(hMem,(DWORD)local_48);
          pWVar20 = (LPCWSTR)GlobalAlloc(0x40,(SIZE_T)local_2c);
          local_18._4_4_ = (HWND)pWVar20;
          if (pWVar20 != (LPCWSTR)0x0) {
            FUN_00403314((int)local_34[1],(HANDLE)0x0,(undefined *)pWVar20,(uint)local_2c);
            for (; (char)*pWVar20 != '\0'; pWVar20 = (LPCWSTR)((int)(pWVar20 + 4) + (int)local_40))
            {
              local_40._0_4_ = *(int *)pWVar20;
              FUN_00406027((undefined1 *)(*(int *)(pWVar20 + 2) + (int)hMem),(int)(pWVar20 + 4),
                           (int)local_40);
            }
            GlobalFree(local_18._4_4_);
          }
          FUN_0040611e(param_1,hMem,(DWORD)local_48);
          GlobalFree(hMem);
          local_40._4_4_ = (HWND)0xffffffff;
        }
      }
      DVar26 = FUN_00403314((int)local_40._4_4_,param_1,(undefined *)0x0,0);
      CloseHandle(param_1);
    }
    iVar19 = -0xd;
    if ((int)DVar26 < 0) {
      iVar19 = -0x11;
      DeleteFileW((LPCWSTR)local_44);
      local_8 = (HWND)0x1;
    }
LAB_0040231d:
    FUN_00401423(iVar19);
    break;
  case 0x3f:
    uVar29 = FUN_00402db0(0);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    uVar30 = (uint)uVar29;
    if (DAT_00429a4c <= uVar30) goto LAB_0040295a;
    iVar19 = uVar30 * 0x818 + DAT_00429a48;
    if (-1 < (int)local_2c) {
      pHVar24 = local_10;
      pHVar15 = *(HWND *)(iVar19 + (int)local_2c * 4);
      if (local_2c == (HWND)0x0) {
        pWVar21 = (WCHAR *)(iVar19 + 0x18);
        goto LAB_00402ac0;
      }
      goto switchD_00401b07_default;
    }
    local_2c = (HWND)(-1 - (int)local_2c);
    if (local_2c == (HWND)0x0) {
      FUN_004065b9((LPWSTR)(iVar19 + 0x18),local_28.dwHighDateTime);
      uVar29 = CONCAT44(local_18._4_4_,local_34[1]);
      *(byte *)(iVar19 + 9) = *(byte *)(iVar19 + 9) | 1;
    }
    else {
      uVar29 = FUN_00402db0(1);
    }
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    local_34[1] = (HWND)uVar29;
    *(HWND *)(iVar19 + (int)local_2c * 4) = local_34[1];
    if ((HWND)local_28.dwLowDateTime != (HWND)0x0) {
      FUN_0040117d(uVar30);
    }
    break;
  case 0x40:
    uVar29 = FUN_00402db0(0);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    uVar30 = (uint)uVar29;
    if (0x1f < uVar30) goto LAB_0040295a;
    if ((HWND)local_28.dwLowDateTime == (HWND)0x0) {
      if (local_2c == (HWND)0x0) {
        FUN_004065b9((LPWSTR)local_10,*(int *)(DAT_00429a30 + 0x94 + uVar30 * 4));
      }
      else {
        *(HWND *)(DAT_00429a30 + 0x94 + uVar30 * 4) = local_34[1];
      }
    }
    else {
      if (local_2c == (HWND)0x0) {
        pHVar15 = (HWND)FUN_004012e2(0);
        pHVar24 = local_10;
        goto switchD_00401b07_default;
      }
      FUN_00401299(uVar30);
      FUN_004011ef(0,0);
    }
    break;
  case 0x41:
    if ((HWND)local_28.dwLowDateTime == (HWND)0x0) {
      pFVar16 = FUN_00406970(5);
      pWVar20 = FUN_00402dd2(0x22);
      if (((pFVar16 == (FARPROC)0x0) ||
          (HVar17 = IIDFromString(pWVar20,(LPIID)local_64), HVar17 < 0)) ||
         (iVar19 = (*pFVar16)(local_64,local_28.dwLowDateTime,0,&param_1), iVar19 < 0)) {
        local_8 = (HWND)0x1;
        *(undefined2 *)&local_10->unused = 0;
      }
      else {
        FUN_0040657c((LPWSTR)local_10,(LPCWSTR)param_1);
        CoTaskMemFree(param_1);
      }
    }
    else if ((HWND)local_28.dwLowDateTime == (HWND)0x1) {
      uVar29 = FUN_00402db0(2);
      local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
      puVar22 = (undefined4 *)uVar29;
      uVar29 = FUN_00402db0(4);
      local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
      param_1 = (HWND)0x0;
      if (puVar22 == (undefined4 *)0x0) {
        puVar22 = &DAT_00429aa0;
      }
      FUN_00406027((undefined1 *)&param_1,((uint)uVar29 >> 0x18) + (int)puVar22,(uint)uVar29 & 0xff)
      ;
      pHVar24 = local_10;
      pHVar15 = param_1;
      goto switchD_00401b07_default;
    }
    break;
  case 0x43:
    SendMessageW(DAT_00429a28,0xb,DAT_00424f08 & (uint)local_34[0],0);
    if (local_34[0] != (HWND)0x0) {
      InvalidateRect(local_c,(RECT *)0x0,0);
    }
  }
switchD_0040148a_caseD_42:
  _DAT_00429aa8 = (int)&local_8->unused + _DAT_00429aa8;
LAB_00402c5f:
  local_34[0] = (HWND)0x0;
switchD_0040148a_caseD_2:
  return local_34[0];
}



/* Function: FUN_00402db0 */

void __cdecl FUN_00402db0(int param_1)

{
  ushort *puVar1;
  
  puVar1 = (ushort *)FUN_004065b9((LPWSTR)0x0,*(int *)(DAT_0040ce24 + param_1 * 4));
  FUN_004064dc(puVar1);
  return;
}



/* Function: FUN_00402dd2 */

LPCWSTR FUN_00402dd2(uint param_1)

{
  uint uVar1;
  LPCWSTR pWVar2;
  
  uVar1 = param_1;
  if ((int)param_1 < 0) {
    uVar1 = -param_1;
  }
  pWVar2 = (LPCWSTR)FUN_004065b9((LPWSTR)(&DAT_0040a5c8 + ((int)uVar1 >> 4) * 0x800),
                                 *(int *)(DAT_0040ce24 + (uVar1 & 0xf) * 4));
  if ((int)param_1 < 0) {
    FUN_0040682a(pWVar2);
  }
  return pWVar2;
}



/* Function: FUN_00402e12 */

uint FUN_00402e12(HKEY param_1)

{
  uint uVar1;
  LPCWSTR pWVar2;
  uint uVar3;
  LSTATUS LVar4;
  HKEY *ppHVar5;
  
  ppHVar5 = &param_1;
  uVar1 = (uint)param_1 | 0x100020;
  pWVar2 = FUN_00402dd2(0x22);
  uVar3 = FUN_00402e4a(*(int *)(DAT_0040ce24 + 4));
  LVar4 = FUN_004063e9(uVar3,pWVar2,uVar1,ppHVar5);
  return ~-(uint)(LVar4 != 0) & (uint)param_1;
}



/* Function: FUN_00402e4a */

int FUN_00402e4a(int param_1)

{
  if (-1 < param_1) {
    param_1 = DAT_00429aa4 + -0x7fffffff + param_1;
  }
  return param_1;
}



/* Function: FUN_00402e62 */

uint FUN_00402e62(int param_1,LPCWSTR param_2,HKEY param_3)

{
  uint uVar1;
  uint uVar2;
  LSTATUS LVar3;
  HKEY *ppHVar4;
  
  ppHVar4 = &param_3;
  uVar1 = (uint)param_3 | 0x100020;
  uVar2 = FUN_00402e4a(param_1);
  LVar3 = FUN_00406417(uVar2,param_2,uVar1,ppHVar4);
  return ~-(uint)(LVar3 != 0) & (uint)param_3;
}



/* Function: FUN_00402e90 */

LSTATUS FUN_00402e90(int param_1,LPCWSTR param_2,uint param_3)

{
  LSTATUS LVar1;
  uint uVar2;
  HKEY pHVar3;
  uint *puVar4;
  
  if (*param_2 == L'\0') {
    LVar1 = 0x3eb;
  }
  else {
    param_3 = param_3 | 0x100020;
    puVar4 = &param_3;
    uVar2 = FUN_00402e4a(param_1);
    pHVar3 = (HKEY)FUN_00406368(uVar2,puVar4);
    if (pHVar3 == (HKEY)0x0) {
      LVar1 = 6;
    }
    else {
      LVar1 = FUN_00402ed5(pHVar3,param_2,param_3);
    }
  }
  return LVar1;
}



/* Function: FUN_00402ed5 */

LSTATUS FUN_00402ed5(HKEY param_1,LPCWSTR param_2,uint param_3)

{
  LSTATUS LVar1;
  FARPROC pFVar2;
  WCHAR local_218 [262];
  DWORD local_c;
  HKEY local_8;
  
  LVar1 = FUN_004063e9((uint)param_1,param_2,CONCAT31((int3)((param_3 & 0x300) >> 8),9),&local_8);
  if (LVar1 == 0) {
    if ((param_3 & 2) != 0) {
      local_c = 0;
      LVar1 = RegEnumValueW(local_8,0,local_218,&local_c,(LPDWORD)0x0,(LPDWORD)0x0,(LPBYTE)0x0,
                            (LPDWORD)0x0);
      if (LVar1 != 0x103) {
LAB_00402f9d:
        RegCloseKey(local_8);
        return 0x3eb;
      }
    }
    do {
      LVar1 = RegEnumKeyW(local_8,0,local_218,0x105);
      if (LVar1 != 0) break;
      if ((param_3 & 1) != 0) goto LAB_00402f9d;
      LVar1 = FUN_00402ed5(local_8,local_218,param_3);
    } while (LVar1 == 0);
    RegCloseKey(local_8);
    pFVar2 = FUN_00406970(3);
    if (pFVar2 == (FARPROC)0x0) {
      LVar1 = RegDeleteKeyW(param_1,param_2);
    }
    else {
      LVar1 = (*pFVar2)(param_1,param_2,param_3 & 0x300,0);
    }
  }
  return LVar1;
}



/* Function: FUN_00402fbf */

undefined4 FUN_00402fbf(HWND param_1,int param_2)

{
  int iVar1;
  uint nNumber;
  WCHAR local_84 [64];
  
  if (param_2 == 0x110) {
    SetTimer(param_1,1,0xfa,(TIMERPROC)0x0);
    param_2 = 0x113;
  }
  if (param_2 == 0x113) {
    nNumber = DAT_0040ceb8;
    if (DAT_00420ec4 <= DAT_0040ceb8) {
      nNumber = DAT_00420ec4;
    }
    iVar1 = MulDiv(nNumber,100,DAT_00420ec4);
    wsprintfW(local_84,u_verifying_installer___d___0040a01c,iVar1);
    SetWindowTextW(param_1,local_84);
    SetDlgItemTextW(param_1,0x406,local_84);
  }
  return 0;
}



/* Function: FUN_00403045 */

void __cdecl FUN_00403045(int param_1)

{
  DWORD DVar1;
  
  if (param_1 != 0) {
    if (DAT_00420ec0 != (HWND)0x0) {
      DestroyWindow(DAT_00420ec0);
    }
    DAT_00420ec0 = (HWND)0x0;
    return;
  }
  if (DAT_00420ec0 != (HWND)0x0) {
    FUN_004069ac(0);
    return;
  }
  DVar1 = GetTickCount();
  if (DAT_00429a2c < DVar1) {
    DAT_00420ec0 = CreateDialogParamW(DAT_00429a20,(LPCWSTR)0x6f,(HWND)0x0,FUN_00402fbf,0);
    ShowWindow(DAT_00420ec0,5);
  }
  return;
}



/* Function: FUN_004030a9 */

wchar_t * FUN_004030a9(uint param_1)

{
  DWORD DVar1;
  HANDLE hFile;
  LPCWSTR pWVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  undefined4 *puVar6;
  int *piVar7;
  uint uVar8;
  uint local_2c;
  int local_28;
  int local_24;
  int local_20;
  int local_1c;
  SIZE_T local_18;
  uint local_14;
  uint local_10;
  int local_c;
  uint local_8;
  
  local_10 = 0;
  local_c = 0;
  local_8 = 0;
  DVar1 = GetTickCount();
  DAT_00429a2c = DVar1 + 1000;
  GetModuleFileNameW((HMODULE)0x0,(LPWSTR)&DAT_00437800,0x400);
  while (hFile = (HANDLE)FUN_0040606c((LPCWSTR)&DAT_00437800,0x80000000,3), DAT_0040a018 = hFile,
        hFile == (HANDLE)0xffffffff) {
    DVar1 = GetLastError();
    if ((DVar1 != 0x20) || (local_8 = local_8 + 1, 6 < local_8)) {
      return u_Error_launching_installer_0040a1e8;
    }
    Sleep(0xfa);
  }
  FUN_0040657c((LPWSTR)&DAT_00435800,(LPCWSTR)&DAT_00437800);
  pWVar2 = FUN_00405e97((LPCWSTR)&DAT_00435800);
  FUN_0040657c((LPWSTR)&DAT_00438000,pWVar2);
  uVar3 = GetFileSize(hFile,(LPDWORD)0x0);
  DAT_00420ec4 = uVar3;
  for (; uVar3 != 0; uVar3 = uVar3 - uVar8) {
    uVar4 = (-(uint)(DAT_00429a34 != 0) & 0x7e00) + 0x200;
    uVar8 = uVar3;
    if (uVar4 <= uVar3) {
      uVar8 = uVar4;
    }
    iVar5 = FUN_004034f9(&DAT_0040cec0,uVar8);
    if (iVar5 == 0) {
      FUN_00403045(1);
      goto LAB_004032b5;
    }
    if (DAT_00429a34 == 0) {
      FUN_00406027((undefined1 *)&local_2c,0x40cec0,0x1c);
      if (((((local_2c & 0xfffffff0) == 0) && (local_28 == -0x21524111)) && (local_1c == 0x74736e49)
          ) && ((local_20 == 0x74666f73 && (local_24 == 0x6c6c754e)))) {
        param_1 = param_1 | local_2c;
        DAT_00429ac0 = DAT_00429ac0 | param_1 & 2;
        DAT_00429a34 = DAT_0040ceb8;
        if (uVar3 < local_14) goto LAB_004032b5;
        if (((param_1 & 8) == 0) && ((param_1 & 4) != 0)) break;
        local_c = local_c + 1;
        uVar3 = local_14 - 4;
        if (uVar3 < uVar8) {
          uVar8 = uVar3;
        }
      }
    }
    else if ((param_1 & 2) == 0) {
      FUN_00403045(0);
    }
    if (uVar3 < DAT_00420ec4) {
      local_10 = FUN_00406a5d(local_10,&DAT_0040cec0,uVar8);
    }
    DAT_0040ceb8 = DAT_0040ceb8 + uVar8;
  }
  FUN_00403045(1);
  if (DAT_00429a34 != 0) {
    if (local_c != 0) {
      FUN_0040350f(DAT_0040ceb8);
      iVar5 = FUN_004034f9(&param_1,4);
      if ((iVar5 == 0) || (local_10 != param_1)) goto LAB_004032b5;
    }
    puVar6 = (undefined4 *)GlobalAlloc(0x40,local_18);
    FUN_0040350f(DAT_00429a34 + 0x1c);
    DVar1 = FUN_00403314(-1,(HANDLE)0x0,(undefined *)puVar6,local_18);
    if (DVar1 == local_18) {
      DAT_00429a38 = *puVar6;
      if ((local_2c & 1) != 0) {
        DAT_00429a3c = DAT_00429a3c + 1;
      }
      piVar7 = puVar6 + 0x11;
      iVar5 = 8;
      DAT_00429a30 = puVar6;
      do {
        piVar7 = piVar7 + -2;
        *piVar7 = *piVar7 + (int)puVar6;
        iVar5 = iVar5 + -1;
      } while (iVar5 != 0);
      DVar1 = SetFilePointer(hFile,0,(PLONG)0x0,1);
      puVar6[0xf] = DVar1;
      FUN_00406027(&DAT_00429a40,(int)(puVar6 + 1),0x40);
      return (wchar_t *)0x0;
    }
  }
LAB_004032b5:
  return u_Installer_integrity_check_has_fa_0040a050;
}



/* Function: FUN_00403314 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

DWORD FUN_00403314(int param_1,HANDLE param_2,undefined *param_3,uint param_4)

{
  int iVar1;
  DWORD DVar2;
  undefined *puVar3;
  DWORD DVar4;
  uint uVar5;
  WCHAR local_94 [64];
  int local_14;
  DWORD local_10;
  DWORD local_c;
  DWORD local_8;
  
  uVar5 = param_4;
  local_c = param_4;
  if (param_3 == (undefined *)0x0) {
    local_c = 0x8000;
  }
  local_8 = 0;
  puVar3 = param_3;
  if (param_3 == (undefined *)0x0) {
    puVar3 = &DAT_00418ec0;
  }
  if (-1 < param_1) {
    FUN_0040350f(DAT_00429a78 + param_1);
  }
  iVar1 = FUN_004034f9(&param_4,4);
  if (iVar1 != 0) {
    if ((param_4 & 0x80000000) == 0) {
      if (param_3 == (undefined *)0x0) {
        while( true ) {
          if ((int)param_4 < 1) {
            return local_8;
          }
          uVar5 = local_c;
          if ((int)param_4 < (int)local_c) {
            uVar5 = param_4;
          }
          iVar1 = FUN_004034f9(&DAT_00414ec0,uVar5);
          if (iVar1 == 0) break;
          iVar1 = FUN_0040611e(param_2,&DAT_00414ec0,uVar5);
          if (iVar1 == 0) {
            return 0xfffffffe;
          }
          local_8 = local_8 + uVar5;
          param_4 = param_4 - uVar5;
        }
      }
      else {
        if ((int)param_4 < (int)uVar5) {
          uVar5 = param_4;
        }
        iVar1 = FUN_004034f9(param_3,uVar5);
        if (iVar1 != 0) {
          return uVar5;
        }
      }
    }
    else {
      local_10 = GetTickCount();
      FUN_00406acb(0x40ce30);
      uVar5 = param_4 & 0x7fffffff;
      param_4 = uVar5;
      if (uVar5 == 0) {
        return local_8;
      }
      while( true ) {
        DVar2 = 0x4000;
        if ((int)param_4 < 0x4000) {
          DVar2 = param_4;
        }
        iVar1 = FUN_004034f9(&DAT_00414ec0,DVar2);
        if (iVar1 == 0) break;
        param_4 = param_4 - DVar2;
        _DAT_0040ce48 = &DAT_00414ec0;
        _DAT_0040ce4c = DVar2;
        while( true ) {
          _DAT_0040ce54 = local_c;
          DAT_0040ce50 = puVar3;
          local_14 = FUN_00406aeb((SIZE_T *)&DAT_0040ce30);
          if (local_14 < 0) {
            return 0xfffffffc;
          }
          DVar4 = (int)DAT_0040ce50 - (int)puVar3;
          DVar2 = GetTickCount();
          if ((((byte)DAT_00429ad4 & 1) != 0) && ((200 < DVar2 - local_10 || (param_4 == 0)))) {
            iVar1 = MulDiv(uVar5 - param_4,100,uVar5);
            wsprintfW(local_94,u______d___0040a21c,iVar1);
            FUN_00405601(0,local_94);
            local_10 = DVar2;
          }
          if (DVar4 == 0) break;
          if (param_3 == (undefined *)0x0) {
            iVar1 = FUN_0040611e(param_2,puVar3,DVar4);
            if (iVar1 == 0) {
              return 0xfffffffe;
            }
          }
          else {
            local_c = local_c - DVar4;
            puVar3 = DAT_0040ce50;
          }
          local_8 = local_8 + DVar4;
          if (local_14 == 1) {
            return local_8;
          }
        }
        if ((int)param_4 < 1) {
          return local_8;
        }
      }
    }
  }
  return 0xfffffffd;
}



/* Function: FUN_004034f9 */

void FUN_004034f9(LPVOID param_1,DWORD param_2)

{
  FUN_004060ef(DAT_0040a018,param_1,param_2);
  return;
}



/* Function: FUN_0040350f */

void FUN_0040350f(LONG param_1)

{
  SetFilePointer(DAT_0040a018,param_1,(PLONG)0x0,0);
  return;
}



/* Function: FUN_00403526 */

void FUN_00403526(void)

{
  int iVar1;
  
  FUN_0040682a((LPCWSTR)&DAT_00436800);
  iVar1 = FUN_00405ec2((ushort *)&DAT_00436800);
  if (iVar1 == 0) {
    return;
  }
  FUN_00405e4b((LPCWSTR)&DAT_00436800);
  FUN_00405b2a((LPCWSTR)&DAT_00436800);
  FUN_0040609b((LPWSTR)&DAT_00436000,(LPCWSTR)&DAT_00436800);
  return;
}



/* Function: entry */
