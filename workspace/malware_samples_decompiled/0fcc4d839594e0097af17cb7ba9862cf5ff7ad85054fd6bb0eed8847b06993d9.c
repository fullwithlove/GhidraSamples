/* Function: FUN_00401000 */

LRESULT FUN_00401000(HWND param_1,UINT param_2,WPARAM param_3,int param_4)

{
  int iVar1;
  LONG LVar2;
  LRESULT LVar3;
  HDC hDC;
  HBRUSH hbr;
  HFONT h;
  HGDIOBJ h_00;
  int iVar4;
  tagPAINTSTRUCT local_60;
  tagRECT local_20;
  LOGBRUSH local_10;
  
  iVar1 = DAT_00429a70;
  if (param_2 == 0xf) {
    hDC = BeginPaint(param_1,&local_60);
    local_10.lbStyle = 0;
    GetClientRect(param_1,&local_20);
    LVar2 = local_20.bottom;
    local_20.bottom = 0;
    for (; local_20.top < LVar2; local_20.top = local_20.top + 4) {
      iVar4 = LVar2 - local_20.top;
      local_10.lbColor =
           (uint)CONCAT11((char)((int)((uint)*(byte *)(iVar1 + 0x52) * iVar4 +
                                      (uint)*(byte *)(iVar1 + 0x56) * local_20.top) / LVar2),
                          (char)((int)((uint)*(byte *)(iVar1 + 0x51) * iVar4 +
                                      (uint)*(byte *)(iVar1 + 0x55) * local_20.top) / LVar2)) << 8 |
           (int)((uint)*(byte *)(iVar1 + 0x50) * iVar4 +
                (uint)*(byte *)(iVar1 + 0x54) * local_20.top) / LVar2 & 0xffU;
      hbr = CreateBrushIndirect(&local_10);
      local_20.bottom = local_20.bottom + 4;
      FillRect(hDC,&local_20,hbr);
      DeleteObject(hbr);
    }
    if (*(int *)(iVar1 + 0x58) != -1) {
      h = CreateFontIndirectW(*(LOGFONTW **)(iVar1 + 0x34));
      if (h != (HFONT)0x0) {
        local_20.left = 0x10;
        local_20.top = 8;
        SetBkMode(hDC,1);
        SetTextColor(hDC,*(COLORREF *)(iVar1 + 0x58));
        h_00 = SelectObject(hDC,h);
        DrawTextW(hDC,(LPCWSTR)&DAT_00428a60,-1,&local_20,0x820);
        SelectObject(hDC,h_00);
        DeleteObject(h);
      }
    }
    EndPaint(param_1,&local_60);
    LVar3 = 0;
  }
  else {
    if (param_2 == 0x46) {
      *(uint *)(param_4 + 0x18) = *(uint *)(param_4 + 0x18) | 0x10;
      *(undefined4 *)(param_4 + 4) = DAT_00429a68;
    }
    LVar3 = DefWindowProcW(param_1,param_2,param_3,param_4);
  }
  return LVar3;
}



/* Function: FUN_0040117d */

void FUN_0040117d(int param_1)

{
  uint uVar1;
  uint uVar2;
  uint *puVar3;
  uint uVar4;
  int iVar5;
  int iVar6;
  
  uVar1 = *(uint *)(param_1 * 0x818 + 8 + DAT_00429a88);
  if ((uVar1 & 2) != 0) {
    uVar4 = param_1 + 1;
    if (uVar4 < DAT_00429a8c) {
      puVar3 = (uint *)(uVar4 * 0x818 + 8 + DAT_00429a88);
      iVar5 = 0;
      do {
        uVar2 = *puVar3;
        if ((uVar2 & 2) == 0) {
          if ((uVar2 & 4) == 0) {
            iVar6 = iVar5;
            if ((uVar2 & 0x10) == 0) {
              *puVar3 = (uVar2 ^ uVar1) & 1 ^ uVar2;
            }
          }
          else {
            iVar6 = iVar5 + -1;
            if (iVar5 == 0) {
              return;
            }
          }
        }
        else {
          iVar6 = iVar5 + 1;
        }
        uVar4 = uVar4 + 1;
        puVar3 = puVar3 + 0x206;
        iVar5 = iVar6;
      } while (uVar4 < DAT_00429a8c);
    }
  }
  return;
}



/* Function: FUN_004011ef */

uint FUN_004011ef(uint param_1,int param_2)

{
  uint *puVar1;
  int iVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  int local_c;
  int local_8;
  
  iVar2 = DAT_00429a88;
  iVar5 = param_1 * 0x818 + DAT_00429a88;
  local_8 = 0;
  local_c = 0;
  if (((*(uint *)(iVar5 + 8) & 2) != 0) && (param_2 != 0)) {
    param_1 = param_1 + 1;
    *(uint *)(iVar5 + 8) = *(uint *)(iVar5 + 8) & 0xffffffbe;
  }
  if (param_1 < DAT_00429a8c) {
    do {
      puVar1 = (uint *)(param_1 * 0x818 + 8 + iVar2);
      uVar3 = param_1 + 1;
      uVar4 = *puVar1;
      if ((uVar4 & 2) != 0) {
        uVar3 = FUN_004011ef(param_1,1);
        uVar4 = *puVar1;
      }
      if ((uVar4 & 4) != 0) {
        if (local_8 == 0) {
          return uVar3;
        }
        if (local_c != 0) {
          *(uint *)(iVar5 + 8) = *(uint *)(iVar5 + 8) | 0x40;
          return uVar3;
        }
        *(uint *)(iVar5 + 8) = *(uint *)(iVar5 + 8) & 0xffffff7f | 1;
        return uVar3;
      }
      if ((uVar4 & 0x40) != 0) {
        local_8 = local_8 + 1;
      }
      if ((uVar4 & 1) == 0) {
        local_c = local_c + 1;
      }
      else {
        local_8 = local_8 + 1;
      }
      param_1 = uVar3;
    } while (uVar3 < DAT_00429a8c);
  }
  return 0;
}



/* Function: FUN_00401299 */

void FUN_00401299(uint param_1)

{
  uint uVar1;
  uint *puVar2;
  uint uVar3;
  
  uVar3 = 0;
  if ((param_1 < 0x20) && (DAT_00429a8c != 0)) {
    puVar2 = (uint *)(DAT_00429a88 + 8);
    do {
      uVar1 = *puVar2;
      if ((uVar1 & 6) == 0) {
        if ((puVar2[-1] & 1 << ((byte)param_1 & 0x1f)) == 0) {
          uVar1 = uVar1 & 0xfffffffe;
        }
        else {
          uVar1 = uVar1 | 1;
        }
        *puVar2 = uVar1;
      }
      uVar3 = uVar3 + 1;
      puVar2 = puVar2 + 0x206;
    } while (uVar3 < DAT_00429a8c);
  }
  return;
}



/* Function: FUN_004012e2 */

uint FUN_004012e2(int param_1)

{
  uint uVar1;
  uint *puVar2;
  bool bVar3;
  int *local_c;
  uint local_8;
  
  local_8 = 0;
  local_c = (int *)(DAT_00429a70 + 0x94);
  do {
    uVar1 = 0;
    if (*local_c != 0) {
      bVar3 = DAT_00429a8c == 0;
      if (DAT_00429a8c != 0) {
        puVar2 = (uint *)(DAT_00429a88 + 8);
        do {
          if (((*puVar2 & 6) == 0) &&
             (((param_1 == 0 || (*(int *)(param_1 + uVar1 * 4) != 0)) &&
              ((puVar2[-1] & 1 << ((byte)local_8 & 0x1f)) != (*puVar2 & 1) << ((byte)local_8 & 0x1f)
              )))) break;
          uVar1 = uVar1 + 1;
          puVar2 = puVar2 + 0x206;
        } while (uVar1 < DAT_00429a8c);
        bVar3 = uVar1 == DAT_00429a8c;
      }
      if (bVar3) {
        return local_8;
      }
    }
    local_8 = local_8 + 1;
    local_c = local_c + 1;
    if (0x1f < local_8) {
      return local_8;
    }
  } while( true );
}



/* Function: FUN_0040136d */

void FUN_0040136d(int param_1)

{
  if (param_1 < 0) {
    FUN_00406602((ushort *)(&DAT_0042a000 + (param_1 + 1) * -0x800));
  }
  return;
}



/* Function: FUN_00401389 */

undefined4 FUN_00401389(int param_1,HWND param_2)

{
  HWND pHVar1;
  int iVar2;
  int iVar3;
  WPARAM wParam;
  LPARAM lParam;
  
  while ((-1 < param_1 && (pHVar1 = (HWND)(param_1 * 0x1c + DAT_00429a90), pHVar1->unused != 1))) {
    pHVar1 = FUN_00401434(pHVar1);
    if (pHVar1 == (HWND)0x7fffffff) {
      return 0x7fffffff;
    }
    iVar2 = FUN_0040136d((int)pHVar1);
    if (iVar2 == 0) {
      iVar3 = 1;
      iVar2 = param_1 + 1;
    }
    else {
      iVar2 = iVar2 + -1;
      iVar3 = iVar2 - param_1;
    }
    param_1 = iVar2;
    if (param_2 != (HWND)0x0) {
      DAT_00428a4c = DAT_00428a4c + iVar3;
      lParam = 0;
      wParam = MulDiv(DAT_00428a4c,30000,DAT_00428a34);
      SendMessageW(param_2,0x402,wParam,lParam);
    }
  }
  return 0;
}



/* Function: FUN_0040140b */

void FUN_0040140b(int param_1)

{
  FUN_00401389(*(int *)(DAT_00429a70 + 0x6c + param_1 * 4),(HWND)0x0);
  return;
}



/* Function: FUN_00401423 */

void FUN_00401423(int param_1)

{
  FUN_00405727(param_1,(LPCWSTR)&DAT_0040adf8);
  return;
}



/* Function: FUN_00401434 */

/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

HWND FUN_00401434(HWND param_1)

{
  short sVar1;
  undefined4 uVar2;
  short *psVar3;
  HWND pHVar4;
  uint uVar5;
  LRESULT LVar6;
  HGDIOBJ ho;
  HDC hdc;
  SIZE_T dwBytes;
  undefined *puVar7;
  LPCWSTR lpFileName;
  LPCWSTR pWVar8;
  DWORD DVar9;
  HKEY pHVar10;
  LSTATUS LVar11;
  HANDLE pvVar12;
  LPWSTR pWVar13;
  BOOL BVar14;
  int iVar15;
  HGLOBAL hMem;
  HWND pHVar16;
  FARPROC pFVar17;
  HRESULT HVar18;
  byte bVar19;
  int iVar20;
  LPCWSTR extraout_EDX;
  LPCWSTR pWVar21;
  WCHAR *pWVar22;
  undefined4 *puVar23;
  int *piVar24;
  HWND pHVar25;
  LPCWSTR pWVar26;
  bool bVar27;
  undefined8 uVar28;
  undefined8 uVar29;
  LONG lDistanceToMove;
  PLONG lpDistanceToMoveHigh;
  uint uVar30;
  _WIN32_FIND_DATAW local_2e0;
  undefined1 local_90 [32];
  HINSTANCE local_70;
  LPCWSTR local_6c;
  LPCWSTR local_68;
  undefined1 local_64 [12];
  uchar auStack_58 [2];
  uchar auStack_56 [2];
  uint local_54;
  FARPROC local_50 [2];
  LPCWSTR local_48;
  FARPROC local_44;
  undefined8 local_40;
  int local_38;
  HWND local_34 [2];
  HWND local_2c;
  FILETIME local_28;
  HWND local_20;
  HWND local_1c;
  undefined8 local_18;
  HWND local_10;
  HWND local_c;
  HWND local_8;
  
  pHVar16 = DAT_0040ce58;
  pHVar25 = param_1;
  piVar24 = &local_38;
  for (iVar20 = 7; iVar20 != 0; iVar20 = iVar20 + -1) {
    *piVar24 = pHVar25->unused;
    pHVar25 = pHVar25 + 1;
    piVar24 = piVar24 + 1;
  }
  local_c = DAT_00429a68;
  pWVar21 = (LPCWSTR)0x0;
  local_10 = (HWND)(&DAT_0042a000 + (int)local_34[1] * 0x800);
  DAT_0040ce54 = local_34;
  iVar20 = (int)local_34[0] * 0x800;
  pHVar25 = (HWND)(&DAT_0042a000 + iVar20);
  local_8 = (HWND)0x0;
  switch(local_38) {
  case 2:
    goto switchD_0040148a_caseD_2;
  case 3:
    pWVar21 = (LPCWSTR)0x0;
LAB_00401493:
    FUN_00405727((int)local_34[0],pWVar21);
    return (HWND)0x7fffffff;
  case 4:
    DAT_00428a2c = DAT_00428a2c + 1;
    if (DAT_00429a68 == (HWND)0x0) {
      return (HWND)0x7fffffff;
    }
    PostQuitMessage(0);
    return (HWND)0x7fffffff;
  case 5:
    iVar20 = FUN_0040136d((int)local_34[0]);
    pHVar16 = (HWND)FUN_00401389(iVar20 + -1,(HWND)0x0);
    return pHVar16;
  case 6:
    FUN_00405727((int)local_34[0],(LPCWSTR)0x0);
    break;
  case 7:
    uVar29 = FUN_00402da9(0);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    DVar9 = (DWORD)uVar29;
    if ((int)DVar9 < 2) {
      DVar9 = 1;
    }
    Sleep(DVar9);
    break;
  case 8:
    SetForegroundWindow(DAT_00429a68);
    break;
  case 9:
    if (DAT_00428a30 != (HWND)0x0) {
      ShowWindow(DAT_00428a30,(int)local_34[1]);
    }
    if (DAT_00428a44 != (HWND)0x0) {
      ShowWindow(DAT_00428a44,(int)local_34[0]);
    }
    break;
  case 10:
    pWVar21 = FUN_00402dcb(0xfffffff0);
    pWVar13 = (LPWSTR)SetFileAttributesW(pWVar21,(DWORD)local_34[1]);
    goto LAB_004015d9;
  case 0xb:
    param_1 = (HWND)FUN_00402dcb(0xfffffff0);
    pWVar13 = FUN_0040601c((LPCWSTR)param_1);
    if (pWVar13 != (LPWSTR)0x0) {
      do {
        psVar3 = (short *)FUN_00405f9e(pWVar13,L'\\');
        sVar1 = *psVar3;
        *psVar3 = 0;
        if (((sVar1 == 0) && (local_2c != (HWND)0x0)) && (iVar20 = FUN_00405c6d(), iVar20 != 0)) {
          DVar9 = FUN_00405bf6((LPCWSTR)param_1);
        }
        else {
          DVar9 = FUN_00405c50((LPCWSTR)param_1);
        }
        if ((DVar9 != 0) &&
           ((DVar9 != 0xb7 || (DVar9 = GetFileAttributesW((LPCWSTR)param_1), (DVar9 & 0x10) == 0))))
        {
          local_8 = (HWND)((int)&local_8->unused + 1);
        }
        *psVar3 = sVar1;
        pWVar13 = psVar3 + 1;
      } while (sVar1 != 0);
    }
    if (local_34[1] == (HWND)0x0) {
      iVar20 = -0xb;
      goto LAB_00402316;
    }
    FUN_00401423(-0x1a);
    FUN_004066a2((LPWSTR)&DAT_00435000,(LPCWSTR)param_1);
    BVar14 = SetCurrentDirectoryW((LPCWSTR)param_1);
    if (BVar14 == 0) {
      local_8 = (HWND)((int)&local_8->unused + 1);
    }
    break;
  case 0xc:
    pWVar21 = FUN_00402dcb(0);
    puVar7 = FUN_004069ff(pWVar21);
    local_28.dwLowDateTime = (DWORD)local_34[1];
    goto joined_r0x00401a43;
  case 0xd:
    if ((int)local_2c < 1) {
      if ((int)local_2c < 0) {
        DAT_0040ce5c = (&DAT_00429ae0)[(int)local_34[0]];
      }
      else {
        *(undefined4 *)(&DAT_00429b40 + (int)local_34[0] * 4) = (&DAT_00429ae0)[(int)local_34[0]];
      }
      uVar2 = FUN_00402da9(1);
      (&DAT_00429ae0)[(int)local_34[0]] = uVar2;
    }
    else {
      (&DAT_00429ae0)[(int)local_34[0]] = *(undefined4 *)(&DAT_00429b40 + (int)local_34[0] * 4);
      if ((int)local_28.dwLowDateTime < 0) {
        (&DAT_00429ae0)[(int)local_34[0]] = DAT_0040ce5c;
      }
    }
    break;
  case 0xe:
    uVar30 = (&DAT_00429ae0)[(int)local_2c];
    pHVar16 = local_34[uVar30 == 0];
    (&DAT_00429ae0)[(int)local_2c] = uVar30 & local_28.dwLowDateTime;
    return pHVar16;
  case 0xf:
    pHVar16 = (HWND)(&DAT_00429ae0)[(int)local_34[1]];
    goto switchD_00401b00_default;
  case 0x10:
    pWVar21 = FUN_00402dcb(0xffffffd0);
    pWVar8 = FUN_00402dcb(0xffffffdf);
    FUN_00402dcb(0x13);
    BVar14 = MoveFileW(pWVar21,pWVar8);
    if (BVar14 == 0) {
      if ((local_2c == (HWND)0x0) || (puVar7 = FUN_004069ff(pWVar21), puVar7 == (undefined *)0x0))
      goto LAB_00402953;
      FUN_00406462(pWVar21,pWVar8);
      iVar20 = -0x1c;
    }
    else {
      iVar20 = -0x1d;
    }
    goto LAB_00402316;
  case 0x11:
    pHVar25 = (HWND)FUN_00402dcb(0);
    pHVar16 = local_10;
    DVar9 = GetFullPathNameW((LPCWSTR)pHVar25,0x400,(LPWSTR)local_10,(LPWSTR *)&param_1);
    if (DVar9 == 0) {
LAB_00401735:
      local_8 = (HWND)0x1;
      *(undefined2 *)&pHVar16->unused = 0;
    }
    else if ((pHVar25 < param_1) && ((short)param_1->unused != 0)) {
      puVar7 = FUN_004069ff((LPCWSTR)pHVar25);
      if (puVar7 == (undefined *)0x0) goto LAB_00401735;
      FUN_004066a2((LPWSTR)param_1,(LPCWSTR)(puVar7 + 0x2c));
    }
    if (local_2c == (HWND)0x0) {
      GetShortPathNameW((LPCWSTR)pHVar16,(LPWSTR)pHVar16,0x400);
    }
    break;
  case 0x12:
    pWVar21 = FUN_00402dcb(0xffffffff);
    DVar9 = SearchPathW((LPCWSTR)0x0,pWVar21,(LPCWSTR)0x0,0x400,(LPWSTR)pHVar25,(LPWSTR *)&param_1);
    bVar27 = DVar9 == 0;
    goto LAB_00401776;
  case 0x13:
    pWVar21 = FUN_00402dcb(0xffffffef);
    pWVar13 = FUN_004061c1((LPWSTR)pHVar25,pWVar21);
    goto LAB_004015d9;
  case 0x14:
    local_c = (HWND)FUN_00402dcb(0x31);
    param_1 = (HWND)((uint)local_34[0] & 7);
    iVar20 = FUN_00405fe8((ushort *)local_c);
    if (iVar20 == 0) {
      pHVar16 = local_c;
      pWVar21 = (LPCWSTR)FUN_004066a2((LPWSTR)&DAT_0040a5f8,(LPCWSTR)&DAT_00435000);
      pWVar21 = FUN_00405f71(pWVar21);
      lstrcatW(pWVar21,(LPCWSTR)pHVar16);
    }
    else {
      FUN_004066a2((LPWSTR)&DAT_0040a5f8,(LPCWSTR)local_c);
    }
    FUN_00406950((LPCWSTR)&DAT_0040a5f8);
    do {
      if (2 < (int)param_1) {
        puVar7 = FUN_004069ff((LPCWSTR)&DAT_0040a5f8);
        uVar30 = 0;
        if (puVar7 != (undefined *)0x0) {
          uVar30 = CompareFileTime((FILETIME *)(puVar7 + 0x14),&local_28);
        }
        param_1 = (HWND)(uint)((((uint)((int)&param_1[-1].unused + 1U) | 0x80000000) & uVar30) == 0)
        ;
      }
      if (param_1 == (HWND)0x0) {
        FUN_0040616d((LPCWSTR)&DAT_0040a5f8);
      }
      local_40._4_4_ =
           (HWND)FUN_00406192((LPCWSTR)&DAT_0040a5f8,0x40000000,(param_1 != (HWND)0x1) + 1);
      if (local_40._4_4_ != (HWND)0xffffffff) {
        FUN_00405727(-0x16,(LPCWSTR)local_c);
        DAT_00429b14 = DAT_00429b14 + 1;
        iVar20 = FUN_00403396((DWORD)local_2c,local_40._4_4_,(LPVOID)0x0,0);
        DAT_00429b14 = DAT_00429b14 + -1;
        if (((HWND)local_28.dwLowDateTime != (HWND)0xffffffff) ||
           ((HWND)local_28.dwHighDateTime != (HWND)0xffffffff)) {
          SetFileTime(local_40._4_4_,&local_28,(FILETIME *)0x0,&local_28);
        }
        CloseHandle(local_40._4_4_);
        if (-1 < iVar20) goto switchD_0040148a_caseD_42;
        if (iVar20 == -2) {
          FUN_004066df((LPWSTR)&DAT_0040a5f8,-0x17);
          lstrcatW((LPWSTR)&DAT_0040a5f8,(LPCWSTR)local_c);
        }
        else {
          FUN_004066df((LPWSTR)&DAT_0040a5f8,-0x12);
        }
        uVar30 = 0x200010;
        puVar7 = &DAT_0040a5f8;
        goto LAB_004023bd;
      }
      if (param_1 != (HWND)0x0) {
        FUN_00405727(-0x1e,(LPCWSTR)local_c);
        bVar27 = param_1 == (HWND)0x2;
        goto LAB_004015db;
      }
      FUN_004066a2((LPWSTR)&DAT_0040b5f8,(LPCWSTR)&DAT_0042a000);
      FUN_004066a2((LPWSTR)&DAT_0042a000,(LPCWSTR)&DAT_0040a5f8);
      FUN_004066df((LPWSTR)&DAT_0040adf8,(int)local_20);
      FUN_004066a2((LPWSTR)&DAT_0042a000,(LPCWSTR)&DAT_0040b5f8);
      iVar20 = FUN_00405d02(&DAT_0040adf8,(int)local_34[0] >> 3);
    } while (iVar20 == 4);
    if (iVar20 != 5) {
      pWVar21 = (LPCWSTR)&DAT_0040a5f8;
      local_34[0] = (HWND)0xfffffffa;
      goto LAB_00401493;
    }
    _DAT_00429ae8 = _DAT_00429ae8 + 1;
    goto LAB_00402c58;
  case 0x15:
    uVar30 = 0;
    goto LAB_00401968;
  case 0x16:
    pWVar21 = FUN_00402dcb(0x31);
    pHVar16 = (HWND)FUN_00405d02(pWVar21,(uint)local_34[0]);
    if (pHVar16 == (HWND)0x0) goto LAB_00402953;
    if (pHVar16 == local_2c) {
      return (HWND)local_28.dwLowDateTime;
    }
    if (pHVar16 == (HWND)local_28.dwHighDateTime) {
      return local_20;
    }
    break;
  case 0x17:
    uVar30 = 0xfffffff0;
LAB_00401968:
    pWVar21 = FUN_00402dcb(uVar30);
    FUN_00405dae(pWVar21,(uint)local_34[1]);
    break;
  case 0x18:
    pWVar21 = FUN_00402dcb(1);
    pHVar16 = (HWND)lstrlenW(pWVar21);
    goto switchD_00401b00_default;
  case 0x19:
    local_18 = FUN_00402da9(2);
    local_40 = FUN_00402da9(3);
    pHVar16 = (HWND)local_40;
    param_1 = (HWND)local_18;
    local_48 = FUN_00402dcb(1);
    pHVar4 = (HWND)lstrlenW(local_48);
    *(undefined2 *)&pHVar25->unused = 0;
    if (local_18._4_4_ == (HWND)0x0) {
      param_1 = pHVar4;
    }
    if ((param_1 != (HWND)0x0) &&
       ((-1 < (int)local_40 ||
        (pHVar16 = (HWND)((int)local_40 + (int)&pHVar4->unused), -1 < (int)pHVar16)))) {
      if ((int)pHVar4 < (int)pHVar16) {
        pHVar16 = pHVar4;
      }
      FUN_004066a2((LPWSTR)pHVar25,local_48 + (int)pHVar16);
      if ((int)param_1 < 0) {
        iVar20 = lstrlenW((LPCWSTR)pHVar25);
        param_1 = (HWND)((int)&param_1->unused + iVar20);
        if ((int)param_1 < 0) {
          param_1 = (HWND)0x0;
        }
      }
      if ((int)param_1 < 0x400) {
        *(undefined2 *)((int)&pHVar25->unused + (int)param_1 * 2) = 0;
      }
    }
    break;
  case 0x1a:
    pWVar21 = FUN_00402dcb(0x20);
    pWVar8 = FUN_00402dcb(0x31);
    if ((HWND)local_28.dwHighDateTime == (HWND)0x0) {
      puVar7 = (undefined *)lstrcmpiW(pWVar21,pWVar8);
    }
    else {
      puVar7 = (undefined *)lstrcmpW(pWVar21,pWVar8);
    }
    goto joined_r0x00401a43;
  case 0x1b:
    param_1 = (HWND)FUN_00402dcb(1);
    DVar9 = ExpandEnvironmentStringsW((LPCWSTR)param_1,(LPWSTR)pHVar25,0x400);
    if ((DVar9 == 0) ||
       ((local_2c != (HWND)0x0 &&
        (iVar15 = lstrcmpW((LPCWSTR)param_1,(LPCWSTR)pHVar25), iVar15 == 0)))) {
      local_8 = (HWND)0x1;
      *(undefined2 *)&pHVar25->unused = 0;
    }
    *(undefined2 *)(&DAT_0042a7fe + iVar20) = 0;
    break;
  case 0x1c:
    uVar29 = FUN_00402da9(0);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    uVar30 = (uint)uVar29;
    uVar5 = FUN_00402da9(1);
    if (local_20 != (HWND)0x0) {
      if (uVar30 < uVar5) {
        return (HWND)local_28.dwLowDateTime;
      }
      if (uVar30 <= uVar5) {
        return local_2c;
      }
      return (HWND)local_28.dwHighDateTime;
    }
    if ((int)uVar30 < (int)uVar5) {
      return (HWND)local_28.dwLowDateTime;
    }
    if ((int)uVar30 <= (int)uVar5) {
      return local_2c;
    }
    return (HWND)local_28.dwHighDateTime;
  case 0x1d:
    uVar29 = FUN_00402da9(1);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    pHVar4 = (HWND)uVar29;
    param_1 = pHVar4;
    uVar29 = FUN_00402da9(2);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    uVar30 = (uint)uVar29;
    bVar19 = (byte)uVar29;
    pHVar16 = param_1;
    switch(local_28.dwLowDateTime) {
    case 0:
      pHVar16 = (HWND)((int)&pHVar4->unused + uVar30);
      break;
    case 1:
      pHVar16 = (HWND)((int)pHVar4 - uVar30);
      break;
    case 2:
      pHVar16 = (HWND)(uVar30 * (int)pHVar4);
      break;
    case 3:
      if (uVar30 == 0) {
LAB_00401b71:
        local_8 = (HWND)0x1;
        pHVar16 = (HWND)0x0;
      }
      else {
        pHVar16 = (HWND)((int)pHVar4 / (int)uVar30);
      }
      break;
    case 4:
      pHVar16 = (HWND)(uVar30 | (uint)pHVar4);
      break;
    case 5:
      pHVar16 = (HWND)(uVar30 & (uint)pHVar4);
      break;
    case 6:
      pHVar16 = (HWND)(uVar30 ^ (uint)pHVar4);
      break;
    case 7:
      pHVar16 = (HWND)(uint)(pHVar4 == (HWND)0x0);
      break;
    case 8:
      if (pHVar4 == (HWND)0x0) {
LAB_00401b55:
        if (uVar30 == 0) goto LAB_00401b4a;
      }
      pHVar16 = (HWND)0x1;
      break;
    case 9:
      if (pHVar4 != (HWND)0x0) goto LAB_00401b55;
LAB_00401b4a:
      pHVar16 = (HWND)0x0;
      break;
    case 10:
      if (uVar30 == 0) goto LAB_00401b71;
      pHVar16 = (HWND)((int)pHVar4 % (int)uVar30);
      break;
    case 0xb:
      pHVar16 = (HWND)((int)pHVar4 << (bVar19 & 0x1f));
      break;
    case 0xc:
      pHVar16 = (HWND)((int)pHVar4 >> (bVar19 & 0x1f));
      break;
    case 0xd:
      pHVar16 = (HWND)((uint)pHVar4 >> (bVar19 & 0x1f));
    }
    goto switchD_00401b00_default;
  case 0x1e:
    pWVar21 = FUN_00402dcb(1);
    uVar29 = FUN_00402da9(2);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    wsprintfW((LPWSTR)pHVar25,pWVar21,(int)uVar29);
    break;
  case 0x1f:
    if (local_2c == (HWND)0x0) {
      if (local_34[1] != (HWND)0x0) {
        if (DAT_0040ce58 != (HWND)0x0) {
          FUN_004066a2((LPWSTR)pHVar25,(LPCWSTR)(DAT_0040ce58 + 1));
          DAT_0040ce58 = (HWND)pHVar16->unused;
          goto LAB_00401c30;
        }
        goto LAB_00402953;
      }
      pHVar16 = (HWND)GlobalAlloc(0x40,0x804);
      FUN_004066df((LPWSTR)(pHVar16 + 1),(int)local_34[0]);
      pHVar16->unused = (int)DAT_0040ce58;
      DAT_0040ce58 = pHVar16;
    }
    else {
      do {
        local_2c = (HWND)((int)&local_2c[-1].unused + 3);
        if (pHVar16 == (HWND)0x0) goto LAB_004023af;
        pHVar16 = (HWND)pHVar16->unused;
      } while (local_2c != (HWND)0x0);
      if (pHVar16 == (HWND)0x0) goto LAB_004023af;
      FUN_004066a2((LPWSTR)&DAT_0040a5f8,(LPCWSTR)(pHVar16 + 1));
      FUN_004066a2((LPWSTR)(pHVar16 + 1),(LPCWSTR)(DAT_0040ce58 + 1));
      pWVar22 = (WCHAR *)&DAT_0040a5f8;
      pHVar25 = DAT_0040ce58 + 1;
LAB_00402ab9:
      FUN_004066a2((LPWSTR)pHVar25,pWVar22);
    }
    break;
  case 0x20:
  case 0x21:
    uVar29 = FUN_00402da9(3);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    local_1c = (HWND)uVar29;
    uVar29 = FUN_00402da9(4);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    param_1 = (HWND)uVar29;
    if (((uint)local_20 & 1) != 0) {
      local_1c = (HWND)FUN_00402dcb(0x33);
      uVar29 = CONCAT44(local_18._4_4_,param_1);
    }
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    param_1 = (HWND)uVar29;
    if (((uint)local_20 & 2) != 0) {
      pWVar21 = FUN_00402dcb(0x44);
      uVar29 = CONCAT44(local_18._4_4_,pWVar21);
    }
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    param_1 = (HWND)uVar29;
    if (local_38 == 0x21) {
      uVar29 = FUN_00402da9(1);
      local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
      uVar28 = FUN_00402da9(2);
      local_18._4_4_ = (HWND)((ulonglong)uVar28 >> 0x20);
      if ((int)local_20 >> 2 == 0) {
        pHVar16 = (HWND)SendMessageW((HWND)uVar29,(UINT)uVar28,(WPARAM)local_1c,(LPARAM)param_1);
        local_40._4_4_ = pHVar16;
        local_34[1] = local_34[0];
      }
      else {
        LVar6 = SendMessageTimeoutW((HWND)uVar29,(UINT)uVar28,(WPARAM)local_1c,(LPARAM)param_1,0,
                                    (int)local_20 >> 2,(PDWORD_PTR)((int)&local_40 + 4));
        local_8 = (HWND)(uint)(LVar6 == 0);
        pHVar16 = local_40._4_4_;
        local_34[1] = local_34[0];
      }
    }
    else {
      pWVar21 = FUN_00402dcb(1);
      pWVar8 = FUN_00402dcb(0x12);
      pHVar16 = FindWindowExW(local_1c,param_1,(LPCWSTR)(-(uint)(*pWVar21 != L'\0') & (uint)pWVar21)
                              ,(LPCWSTR)(-(uint)(*pWVar8 != L'\0') & (uint)pWVar8));
      local_40._4_4_ = pHVar16;
      local_34[1] = local_34[0];
    }
    goto joined_r0x004028dd;
  case 0x22:
    uVar29 = FUN_00402da9(0);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    puVar7 = (undefined *)IsWindow((HWND)uVar29);
    local_28.dwLowDateTime = (DWORD)local_34[1];
joined_r0x00401a43:
    if (puVar7 == (undefined *)0x0) {
      return local_2c;
    }
    return (HWND)local_28.dwLowDateTime;
  case 0x23:
    uVar29 = FUN_00402da9(2);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    uVar28 = FUN_00402da9(1);
    local_18._4_4_ = (HWND)((ulonglong)uVar28 >> 0x20);
    pHVar16 = GetDlgItem((HWND)uVar28,(int)uVar29);
    goto switchD_00401b00_default;
  case 0x24:
    iVar20 = (int)&local_34[1]->unused + DAT_00429aa8;
    uVar29 = FUN_00402da9(0);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    SetWindowLongW((HWND)uVar29,-0x15,iVar20);
    break;
  case 0x25:
    if ((local_28.dwLowDateTime & 0x100) == 0) {
      pHVar16 = GetDlgItem(DAT_00429a68,(int)local_2c);
      uVar29 = CONCAT44(local_18._4_4_,pHVar16);
    }
    else {
      uVar29 = FUN_00402da9(2);
    }
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    param_1 = (HWND)uVar29;
    local_40._4_4_ = (HWND)(local_28.dwLowDateTime & 3);
    uVar30 = local_28.dwLowDateTime & 4;
    local_1c = (HWND)(local_28.dwLowDateTime >> 0x1f);
    local_44 = (FARPROC)(local_28.dwLowDateTime >> 0x1e & 1);
    if ((local_28.dwLowDateTime & 0x10000) == 0) {
      local_48 = (LPCWSTR)((uint)local_34[1] & 0xffff);
    }
    else {
      local_48 = FUN_00402dcb(0x11);
      uVar29 = CONCAT44(local_18._4_4_,param_1);
    }
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    param_1 = (HWND)uVar29;
    GetClientRect(param_1,(LPRECT)local_64);
    pHVar16 = (HWND)LoadImageW((HINSTANCE)(-(uint)(uVar30 != 0) & DAT_00429a60),local_48,
                               (UINT)local_40._4_4_,
                               CONCAT22(local_64._10_2_,local_64._8_2_) * (int)local_1c,
                               CONCAT22(auStack_56,auStack_58) * (int)local_44,
                               local_28.dwLowDateTime & 0xfef0);
    ho = (HGDIOBJ)SendMessageW(param_1,0x172,(WPARAM)local_40._4_4_,(LPARAM)pHVar16);
    local_34[1] = local_34[0];
    if ((ho != (HGDIOBJ)0x0) && (local_40._4_4_ == (HWND)0x0)) {
      DeleteObject(ho);
      local_34[1] = local_34[0];
    }
joined_r0x004028dd:
    if (-1 < (int)local_34[1]) goto switchD_00401b00_default;
    break;
  case 0x26:
    hdc = GetDC(DAT_00429a68);
    uVar29 = FUN_00402da9(2);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    iVar15 = 0x48;
    iVar20 = GetDeviceCaps(hdc,0x5a);
    _DAT_0040cdf8 = MulDiv((int)uVar29,iVar20,iVar15);
    _DAT_0040cdf8 = -_DAT_0040cdf8;
    ReleaseDC(local_c,hdc);
    uVar29 = FUN_00402da9(3);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    _DAT_0040ce08 = (undefined4)uVar29;
    DAT_0040ce0c = (byte)local_28.dwHighDateTime & 1;
    DAT_0040ce0f = 1;
    DAT_0040ce0d = (byte)local_28.dwHighDateTime & 2;
    DAT_0040ce0e = (byte)local_28.dwHighDateTime & 4;
    FUN_004066df((LPWSTR)&DAT_0040ce14,(int)local_34[1]);
    pHVar16 = (HWND)CreateFontIndirectW((LOGFONTW *)&DAT_0040cdf8);
    goto switchD_00401b00_default;
  case 0x27:
    uVar29 = FUN_00402da9(0);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    uVar28 = FUN_00402da9(1);
    local_18._4_4_ = (HWND)((ulonglong)uVar28 >> 0x20);
    if ((HWND)local_28.dwLowDateTime == (HWND)0x0) {
      ShowWindow((HWND)uVar29,(int)uVar28);
    }
    else {
      EnableWindow((HWND)uVar29,(int)uVar28);
    }
    break;
  case 0x28:
    pWVar21 = FUN_00402dcb(0);
    pWVar8 = FUN_00402dcb(0x31);
    pWVar26 = FUN_00402dcb(0x22);
    FUN_00402dcb(0x15);
    FUN_00401423(-0x14);
    local_90._4_4_ = local_28.dwHighDateTime;
    local_90._8_4_ = local_c;
    local_90._28_4_ = local_28.dwLowDateTime;
    local_90._12_4_ = -(uint)(*pWVar21 != L'\0') & (uint)pWVar21;
    local_90._24_4_ = &DAT_00435000;
    local_90._20_4_ = -(uint)(*pWVar26 != L'\0') & (uint)pWVar26;
    local_90._16_4_ = pWVar8;
    iVar20 = FUN_00405cc8((SHELLEXECUTEINFOW *)local_90);
    if (iVar20 == 0) goto LAB_00402953;
    if ((local_90._4_4_ & 0x40) != 0) {
      FUN_00406b41((HANDLE)CONCAT22(auStack_56,auStack_58));
      pvVar12 = (HANDLE)CONCAT22(auStack_56,auStack_58);
      goto LAB_00402010;
    }
    break;
  case 0x29:
    pWVar21 = FUN_00402dcb(0);
    FUN_00405727(-0x15,pWVar21);
    pvVar12 = FUN_00405c85(pWVar21);
    if (pvVar12 == (HANDLE)0x0) goto LAB_00402953;
    if (local_2c != (HWND)0x0) {
      DVar9 = FUN_00406b41(pvVar12);
      if ((int)local_34[1] < 0) {
        if (DVar9 != 0) {
          local_8 = (HWND)0x1;
        }
      }
      else {
        FUN_004065e9((LPWSTR)local_10,DVar9);
      }
    }
LAB_00402010:
    CloseHandle(pvVar12);
    break;
  case 0x2a:
    pWVar21 = FUN_00402dcb(2);
    puVar7 = FUN_004069ff(pWVar21);
    if (puVar7 != (undefined *)0x0) {
      FUN_004065e9((LPWSTR)local_10,*(undefined4 *)(puVar7 + 0x14));
      pHVar16 = *(HWND *)(puVar7 + 0x18);
      goto switchD_00401b00_default;
    }
    *(undefined2 *)&pHVar25->unused = 0;
    *(undefined2 *)&local_10->unused = 0;
    goto LAB_00402953;
  case 0x2b:
    pHVar16 = (HWND)FUN_00402dcb(0xffffffee);
    iVar20 = (int)&local_18 + 4;
    local_40._4_4_ = pHVar16;
    pFVar17 = FUN_00406a96(0xb);
    dwBytes = (*pFVar17)(pHVar16,iVar20);
    *(undefined2 *)&pHVar25->unused = 0;
    *(undefined2 *)&local_10->unused = 0;
    local_8 = (HWND)0x1;
    if ((dwBytes != 0) && (param_1 = (HWND)GlobalAlloc(0x40,dwBytes), param_1 != (HWND)0x0)) {
      local_44 = FUN_00406a96(0xc);
      local_1c = (HWND)FUN_00406a96(0xd);
      iVar20 = (*local_44)(local_40._4_4_,0,dwBytes,param_1);
      pHVar16 = param_1;
      if ((iVar20 != 0) &&
         (iVar20 = (*(code *)local_1c)(param_1,&DAT_0040a014,&local_48,local_50), pHVar16 = param_1,
         iVar20 != 0)) {
        FUN_004065e9((LPWSTR)pHVar25,*(undefined4 *)(local_48 + local_28.dwLowDateTime * 2 + 4));
        FUN_004065e9((LPWSTR)local_10,*(undefined4 *)(local_48 + local_28.dwLowDateTime * 2 + 6));
        local_8 = (HWND)0x0;
        pHVar16 = param_1;
      }
LAB_00401c30:
      GlobalFree(pHVar16);
    }
    break;
  case 0x2c:
    local_8 = (HWND)0x1;
    if (DAT_00429b20 < 0) {
      iVar20 = -0x19;
    }
    else {
      pWVar21 = FUN_00402dcb(0xfffffff0);
      local_48 = FUN_00402dcb(1);
      if ((((HWND)local_28.dwHighDateTime != (HWND)0x0) &&
          (param_1 = (HWND)GetModuleHandleW(pWVar21), param_1 != (HWND)0x0)) ||
         (param_1 = (HWND)LoadLibraryExW(pWVar21,(HANDLE)0x0,8), param_1 != (HWND)0x0)) {
        pFVar17 = FUN_00406b05((HMODULE)param_1,local_48);
        if (pFVar17 == (FARPROC)0x0) {
          FUN_00405727(-9,local_48);
        }
        else {
          local_8 = (HWND)0x0;
          if (local_2c == (HWND)0x0) {
            (*pFVar17)(local_c,0x400,&DAT_0042a000,&DAT_0040ce58,&PTR_DAT_0040a000);
          }
          else {
            FUN_00401423((int)local_2c);
            iVar20 = (*pFVar17)();
            if (iVar20 != 0) {
              local_8 = (HWND)0x1;
            }
          }
        }
        if (((HWND)local_28.dwLowDateTime == (HWND)0x0) &&
           (iVar20 = FUN_00403d14((int)param_1), iVar20 != 0)) {
          FreeLibrary((HMODULE)param_1);
        }
        break;
      }
      iVar20 = -10;
      param_1 = (HWND)0x0;
    }
    goto LAB_00402316;
  case 0x2d:
    local_18._4_4_ = (HWND)FUN_00402dcb(0xfffffff0);
    local_48 = FUN_00402dcb(0xffffffdf);
    local_c = (HWND)FUN_00402dcb(2);
    local_50[0] = (FARPROC)FUN_00402dcb(0xffffffcd);
    local_10 = (HWND)FUN_00402dcb(0x45);
    local_54 = local_28.dwHighDateTime & 0xfff;
    local_44 = (FARPROC)((int)local_28.dwHighDateTime >> 0x10 & 0xffff);
    uVar30 = (int)local_28.dwHighDateTime >> 0xc & 7;
    iVar20 = FUN_00405fe8((ushort *)local_48);
    if (iVar20 == 0) {
      FUN_00402dcb(0x21);
    }
    HVar18 = CoCreateInstance((IID *)&DAT_004084dc,(LPUNKNOWN)0x0,1,(IID *)&DAT_004084cc,&param_1);
    if (-1 < HVar18) {
      local_1c = (HWND)(**(code **)param_1->unused)(param_1,&DAT_004084ec,(int)&local_40 + 4);
      if (-1 < (int)local_1c) {
        local_1c = (HWND)(**(code **)(param_1->unused + 0x50))(param_1,local_48);
        if ((local_28.dwHighDateTime & 0x8000) == 0) {
          (**(code **)(param_1->unused + 0x24))(param_1,&DAT_00435000);
        }
        if (uVar30 != 0) {
          (**(code **)(param_1->unused + 0x3c))(param_1,uVar30);
        }
        (**(code **)(param_1->unused + 0x34))(param_1,local_44);
        if (*(WCHAR *)local_50[0] != L'\0') {
          (**(code **)(param_1->unused + 0x44))(param_1,local_50[0],local_54);
        }
        (**(code **)(param_1->unused + 0x2c))(param_1,local_c);
        (**(code **)(param_1->unused + 0x1c))(param_1,local_10);
        if (-1 < (int)local_1c) {
          local_1c = (HWND)(**(code **)((local_40._4_4_)->unused + 0x18))
                                     (local_40._4_4_,local_18._4_4_,1);
        }
        (**(code **)((local_40._4_4_)->unused + 8))(local_40._4_4_);
      }
      (**(code **)(param_1->unused + 8))(param_1);
      if (-1 < (int)local_1c) {
        iVar20 = -0xc;
        goto LAB_00402316;
      }
    }
    local_8 = (HWND)0x1;
    iVar20 = -0x10;
    goto LAB_00402316;
  case 0x2e:
    pWVar21 = FUN_00402dcb(0);
    pWVar8 = FUN_00402dcb(0x11);
    param_1 = (HWND)FUN_00402dcb(0x23);
    puVar7 = FUN_004069ff(pWVar21);
    if (puVar7 != (undefined *)0x0) {
      local_90._28_4_ = local_c;
      local_70 = (HINSTANCE)0x2;
      iVar20 = lstrlenW(pWVar21);
      pWVar21[iVar20 + 1] = L'\0';
      iVar20 = lstrlenW(pWVar8);
      pWVar8[iVar20 + 1] = L'\0';
      local_64._10_2_ = SUB42(param_1,0);
      auStack_58 = SUB42((uint)param_1 >> 0x10,0);
      local_64._0_2_ = local_2c._0_2_;
      local_6c = pWVar21;
      local_68 = pWVar8;
      FUN_00405727(0,(LPCWSTR)param_1);
      iVar20 = SHFileOperationW((LPSHFILEOPSTRUCTW)(local_90 + 0x1c));
      if (iVar20 == 0) break;
    }
    FUN_00405727(-7,(LPCWSTR)0x0);
    goto LAB_00402953;
  case 0x2f:
    if (local_34[0] != (HWND)0xbadf00d) {
LAB_004023af:
      uVar30 = 0x200010;
      puVar7 = (undefined *)FUN_004066df((LPWSTR)0x0,-0x18);
LAB_004023bd:
      FUN_00405d02(puVar7,uVar30);
      return (HWND)0x7fffffff;
    }
    DAT_00429af4 = DAT_00429af4 + 1;
    break;
  case 0x30:
    pWVar8 = (LPCWSTR)0x0;
    pWVar26 = (LPCWSTR)0x0;
    if (local_34[0] != (HWND)0x0) {
      pWVar8 = FUN_00402dcb(0);
    }
    if (local_34[1] != (HWND)0x0) {
      pWVar26 = FUN_00402dcb(0x11);
    }
    if ((HWND)local_28.dwHighDateTime != (HWND)0x0) {
      pWVar21 = FUN_00402dcb(0x22);
    }
    lpFileName = FUN_00402dcb(0xffffffcd);
    pWVar13 = (LPWSTR)WritePrivateProfileStringW(pWVar8,pWVar26,pWVar21,lpFileName);
LAB_004015d9:
    bVar27 = pWVar13 == (LPWSTR)0x0;
LAB_004015db:
    if (bVar27) goto LAB_00402953;
    break;
  case 0x31:
    param_1 = DAT_0040a010;
    pWVar21 = FUN_00402dcb(1);
    local_18._4_4_ = (HWND)FUN_00402dcb(0x12);
    pWVar8 = FUN_00402dcb(0xffffffdd);
    GetPrivateProfileStringW
              (pWVar21,(LPCWSTR)local_18._4_4_,(LPCWSTR)&param_1,(LPWSTR)pHVar25,0x3ff,pWVar8);
    bVar27 = (short)pHVar25->unused == 10;
LAB_00401776:
    if (bVar27) {
LAB_00402921:
      local_8 = (HWND)0x1;
      *(undefined2 *)&pHVar25->unused = 0;
    }
    break;
  case 0x32:
    if ((HWND)local_28.dwHighDateTime == (HWND)0x0) {
      pHVar10 = (HKEY)FUN_00402e0b((HKEY)0x2);
      if (pHVar10 == (HKEY)0x0) goto LAB_00402953;
      pWVar21 = FUN_00402dcb(0x33);
      LVar11 = RegDeleteValueW(pHVar10,pWVar21);
      RegCloseKey(pHVar10);
    }
    else {
      pWVar21 = FUN_00402dcb(0x22);
      LVar11 = FUN_00402e89((int)local_34[1],pWVar21,(int)local_28.dwHighDateTime >> 1);
    }
    if (LVar11 != 0) goto LAB_00402953;
    break;
  case 0x33:
    local_18._4_4_ = local_20;
    local_48 = FUN_00402dcb(2);
    pWVar21 = FUN_00402dcb(0x11);
    local_8 = (HWND)0x1;
    param_1 = (HWND)FUN_00402e5b((int)local_34[0],pWVar21,(HKEY)0x2);
    if (param_1 != (HWND)0x0) {
      DVar9 = 0;
      if ((HWND)local_28.dwHighDateTime == (HWND)0x1) {
        FUN_00402dcb(0x23);
        iVar20 = lstrlenW((LPCWSTR)&DAT_0040b5f8);
        DVar9 = iVar20 * 2 + 2;
      }
      uVar29 = CONCAT44(local_40._4_4_,_DAT_0040b5f8);
      if ((HWND)local_28.dwHighDateTime == (HWND)0x4) {
        uVar29 = FUN_00402da9(3);
        DVar9 = 4;
      }
      local_40._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
      _DAT_0040b5f8 = (undefined4)uVar29;
      if ((HWND)local_28.dwHighDateTime == (HWND)0x3) {
        DVar9 = FUN_00403396(local_28.dwLowDateTime,(HANDLE)0x0,&DAT_0040b5f8,0x1800);
        uVar29 = CONCAT44(local_40._4_4_,_DAT_0040b5f8);
      }
      local_40._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
      _DAT_0040b5f8 = (undefined4)uVar29;
      LVar11 = RegSetValueExW((HKEY)param_1,local_48,0,(DWORD)local_18._4_4_,&DAT_0040b5f8,DVar9);
      pHVar10 = (HKEY)param_1;
      if (LVar11 == 0) {
        local_8 = (HWND)0x0;
      }
LAB_00402622:
      RegCloseKey(pHVar10);
    }
    break;
  case 0x34:
    pHVar10 = (HKEY)FUN_00402e0b((HKEY)0x20019);
    pWVar21 = FUN_00402dcb(0x33);
    *(undefined2 *)&pHVar25->unused = 0;
    if (pHVar10 != (HKEY)0x0) {
      local_18._4_4_ = (HWND)0x800;
      LVar11 = RegQueryValueExW(pHVar10,pWVar21,(LPDWORD)0x0,(LPDWORD)&param_1,(LPBYTE)pHVar25,
                                (LPDWORD)((int)&local_18 + 4));
      if (LVar11 == 0) {
        if (param_1 == (HWND)0x4) {
          local_8 = (HWND)(uint)((HWND)local_28.dwHighDateTime == (HWND)0x0);
          FUN_004065e9((LPWSTR)pHVar25,pHVar25->unused);
          goto LAB_00402622;
        }
        if ((param_1 == (HWND)0x1) || (param_1 == (HWND)0x2)) {
          local_8 = (HWND)local_28.dwHighDateTime;
          goto LAB_0040261a;
        }
      }
      *(undefined2 *)&pHVar25->unused = 0;
      local_8 = (HWND)0x1;
      goto LAB_00402622;
    }
    goto LAB_00402953;
  case 0x35:
    pHVar10 = (HKEY)FUN_00402e0b((HKEY)0x20019);
    uVar29 = FUN_00402da9(3);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    *(undefined2 *)&pHVar25->unused = 0;
    if (pHVar10 != (HKEY)0x0) {
      param_1 = (HWND)0x3ff;
      if ((HWND)local_28.dwHighDateTime == (HWND)0x0) {
        LVar11 = RegEnumValueW(pHVar10,(DWORD)uVar29,(LPWSTR)pHVar25,(LPDWORD)&param_1,(LPDWORD)0x0,
                               (LPDWORD)0x0,(LPBYTE)0x0,(LPDWORD)0x0);
        if (LVar11 != 0) {
          local_8 = (HWND)0x1;
        }
      }
      else {
        RegEnumKeyW(pHVar10,(DWORD)uVar29,(LPWSTR)pHVar25,0x3ff);
      }
LAB_0040261a:
      *(undefined2 *)(&DAT_0042a7fe + iVar20) = 0;
      goto LAB_00402622;
    }
    goto LAB_00402953;
  case 0x36:
    pvVar12 = (HANDLE)FUN_00406602((ushort *)pHVar25);
    if (pvVar12 != (HANDLE)0x0) goto LAB_00402010;
    break;
  case 0x37:
    pWVar21 = FUN_00402dcb(0xffffffed);
    pHVar16 = (HWND)FUN_00406192(pWVar21,(DWORD)local_34[1],(DWORD)local_2c);
    if (pHVar16 == (HWND)0xffffffff) goto LAB_00402950;
switchD_00401b00_default:
    FUN_004065e9((LPWSTR)pHVar25,pHVar16);
    break;
  case 0x38:
  case 0x44:
    local_18._4_4_ = local_2c;
    if (local_2c == (HWND)0x0) {
      if (local_38 == 0x38) {
        FUN_00402dcb(0x21);
        FUN_004066c4((LPCWSTR)&DAT_0040b5f8,&DAT_0040adf8,0x400);
        param_1 = (HWND)lstrlenA(&DAT_0040adf8);
      }
      else {
        pWVar21 = FUN_00402dcb(0x11);
        iVar20 = lstrlenW(pWVar21);
        param_1 = (HWND)(iVar20 * 2);
      }
    }
    else {
      _DAT_0040adf8 = FUN_00402da9(1);
      param_1 = (HWND)((local_38 != 0x38) + 1);
      local_48 = extraout_EDX;
    }
    if (((short)pHVar25->unused != 0) &&
       (((pvVar12 = (HANDLE)FUN_00406602((ushort *)pHVar25),
         local_38 == 0x38 || local_18._4_4_ != (HWND)0x0 ||
         ((HWND)local_28.dwLowDateTime == (HWND)0x0)) ||
        (iVar20 = FUN_00406273(pvVar12,(int)pvVar12), -1 < iVar20)))) {
      pWVar13 = (LPWSTR)FUN_00406244(pvVar12,&DAT_0040adf8,(DWORD)param_1);
      goto LAB_004015d9;
    }
    goto LAB_00402953;
  case 0x39:
  case 0x45:
    local_c = (HWND)0x0;
    local_50[0] = (FARPROC)0x2;
    uVar29 = FUN_00402da9(2);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    local_48 = (LPCWSTR)uVar29;
    if ((int)local_48 < 1) break;
    if (0x3ff < (int)local_48) {
      local_48 = (LPCWSTR)0x3ff;
    }
    if ((short)pHVar25->unused != 0) {
      local_40._4_4_ = (HWND)0x0;
      local_1c = (HWND)FUN_00406602((ushort *)pHVar25);
      if (0 < (int)local_48) {
        do {
          if (local_38 == 0x39) {
            BVar14 = ReadFile(local_1c,(LPVOID)((int)&param_1 + 2),2 - local_28.dwLowDateTime,
                              (LPDWORD)&local_44,(LPOVERLAPPED)0x0);
            if ((BVar14 != 0) && (local_44 != (FARPROC)0x0)) {
              local_54 = CONCAT22((short)((uint)BVar14 >> 0x10),(ushort)param_1._2_1_);
              local_50[0] = local_44;
              if ((HWND)local_28.dwLowDateTime == (HWND)0x0) {
                iVar20 = MultiByteToWideChar(0,8,(LPCSTR)((int)&param_1 + 2),(int)local_44,
                                             (LPWSTR)&local_54,1);
                if (iVar20 == 0) {
                  iVar20 = -(int)local_50[0];
                  do {
                    local_44 = local_44 + -1;
                    local_54 = 0xfffd;
                    if (local_44 == (FARPROC)0x0) break;
                    local_50[0] = local_50[0] + -1;
                    iVar20 = iVar20 + 1;
                    SetFilePointer(local_1c,iVar20,(PLONG)0x0,1);
                    iVar15 = MultiByteToWideChar(0,8,(LPCSTR)((int)&param_1 + 2),(int)local_44,
                                                 (LPWSTR)&local_54,1);
                  } while (iVar15 == 0);
                }
                goto LAB_00402829;
              }
LAB_0040285f:
              FUN_004065e9((LPWSTR)local_10,local_54 & 0xffff);
              goto LAB_00402c58;
            }
            break;
          }
          if (((((HWND)local_28.dwLowDateTime == (HWND)0x0) && (local_c == (HWND)0x0)) &&
              (iVar20 = FUN_00406273(local_1c,0), iVar20 < 0)) ||
             (iVar20 = FUN_00406215(local_1c,&local_54,2), iVar20 == 0)) break;
LAB_00402829:
          if ((HWND)local_28.dwLowDateTime != (HWND)0x0) goto LAB_0040285f;
          sVar1 = (short)local_54;
          if ((local_40._4_2_ == 0xd) || (local_40._4_2_ == 10)) {
            if ((local_40._4_2_ == sVar1) || ((sVar1 != 0xd && (sVar1 != 10)))) {
              SetFilePointer(local_1c,-(int)local_50[0],(PLONG)0x0,1);
            }
            else {
              *(short *)((int)&local_10->unused + (int)local_c * 2) = sVar1;
              local_c = (HWND)((int)local_c + 1);
            }
            break;
          }
          iVar20 = (int)local_c + 1;
          *(short *)((int)&local_10->unused + (int)local_c * 2) = sVar1;
          local_c = (HWND)iVar20;
          if ((sVar1 == 0) || (local_40._4_4_ = (HWND)local_54, (int)local_48 <= iVar20)) break;
        } while( true );
      }
    }
    bVar27 = local_c == (HWND)0x0;
    *(undefined2 *)((int)&local_10->unused + (int)local_c * 2) = 0;
    goto LAB_004015db;
  case 0x3a:
    if ((short)pHVar25->unused != 0) {
      uVar29 = FUN_00402da9(2);
      local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
      lDistanceToMove = (LONG)uVar29;
      lpDistanceToMoveHigh = (PLONG)0x0;
      pvVar12 = (HANDLE)FUN_00406602((ushort *)pHVar25);
      pHVar16 = (HWND)SetFilePointer(pvVar12,lDistanceToMove,lpDistanceToMoveHigh,
                                     local_28.dwLowDateTime);
      pHVar25 = local_10;
      goto joined_r0x004028dd;
    }
    break;
  case 0x3b:
    pvVar12 = (HANDLE)FUN_00406602((ushort *)pHVar25);
    if (pvVar12 != (HANDLE)0x0) {
      FindClose(pvVar12);
    }
    break;
  case 0x3c:
    pvVar12 = (HANDLE)FUN_00406602((ushort *)local_10);
    if ((pvVar12 != (HANDLE)0x0) && (BVar14 = FindNextFileW(pvVar12,&local_2e0), BVar14 != 0)) {
LAB_00402968:
      pWVar22 = local_2e0.cFileName;
      goto LAB_00402ab9;
    }
    goto LAB_00402921;
  case 0x3d:
    pWVar21 = FUN_00402dcb(2);
    pvVar12 = FindFirstFileW(pWVar21,&local_2e0);
    if (pvVar12 != (HANDLE)0xffffffff) {
      FUN_004065e9((LPWSTR)local_10,pvVar12);
      goto LAB_00402968;
    }
    *(undefined2 *)&local_10->unused = 0;
LAB_00402950:
    *(undefined2 *)&pHVar25->unused = 0;
LAB_00402953:
    local_8 = (HWND)0x1;
    break;
  case 0x3e:
    iVar15 = -0x29a;
    pFVar17 = (FARPROC)FUN_00402dcb(0xfffffff0);
    local_44 = pFVar17;
    iVar20 = FUN_00405fe8((ushort *)pFVar17);
    if (iVar20 == 0) {
      FUN_00402dcb(0xffffffed);
    }
    FUN_0040616d((LPCWSTR)pFVar17);
    param_1 = (HWND)FUN_00406192((LPCWSTR)pFVar17,0x40000000,2);
    if (param_1 != (HWND)0xffffffff) {
      local_40._4_4_ = local_34[1];
      if (local_2c != (HWND)0x0) {
        local_48 = DAT_00429a74;
        hMem = GlobalAlloc(0x40,(SIZE_T)DAT_00429a74);
        if (hMem != (HGLOBAL)0x0) {
          FUN_0040361d(0);
          FUN_00403607(hMem,(DWORD)local_48);
          pWVar21 = (LPCWSTR)GlobalAlloc(0x40,(SIZE_T)local_2c);
          local_18._4_4_ = (HWND)pWVar21;
          if (pWVar21 != (LPCWSTR)0x0) {
            FUN_00403396((DWORD)local_34[1],(HANDLE)0x0,pWVar21,(DWORD)local_2c);
            for (; (char)*pWVar21 != '\0'; pWVar21 = (LPCWSTR)((int)(pWVar21 + 4) + (int)local_40))
            {
              local_40._0_4_ = *(int *)pWVar21;
              FUN_0040614d((undefined1 *)(*(int *)(pWVar21 + 2) + (int)hMem),(int)(pWVar21 + 4),
                           (int)local_40);
            }
            GlobalFree(local_18._4_4_);
          }
          FUN_00406244(param_1,hMem,(DWORD)local_48);
          GlobalFree(hMem);
          local_40._4_4_ = (HWND)0xffffffff;
        }
      }
      iVar15 = FUN_00403396((DWORD)local_40._4_4_,param_1,(LPVOID)0x0,0);
      CloseHandle(param_1);
    }
    iVar20 = -0xd;
    if (iVar15 < 0) {
      iVar20 = -0x11;
      DeleteFileW((LPCWSTR)local_44);
      local_8 = (HWND)0x1;
    }
LAB_00402316:
    FUN_00401423(iVar20);
    break;
  case 0x3f:
    uVar29 = FUN_00402da9(0);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    uVar30 = (uint)uVar29;
    if (DAT_00429a8c <= uVar30) goto LAB_00402953;
    iVar20 = uVar30 * 0x818 + DAT_00429a88;
    if (-1 < (int)local_2c) {
      pHVar25 = local_10;
      pHVar16 = *(HWND *)(iVar20 + (int)local_2c * 4);
      if (local_2c == (HWND)0x0) {
        pWVar22 = (WCHAR *)(iVar20 + 0x18);
        goto LAB_00402ab9;
      }
      goto switchD_00401b00_default;
    }
    local_2c = (HWND)(-1 - (int)local_2c);
    if (local_2c == (HWND)0x0) {
      FUN_004066df((LPWSTR)(iVar20 + 0x18),local_28.dwHighDateTime);
      uVar29 = CONCAT44(local_18._4_4_,local_34[1]);
      *(byte *)(iVar20 + 9) = *(byte *)(iVar20 + 9) | 1;
    }
    else {
      uVar29 = FUN_00402da9(1);
    }
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    local_34[1] = (HWND)uVar29;
    *(HWND *)(iVar20 + (int)local_2c * 4) = local_34[1];
    if ((HWND)local_28.dwLowDateTime != (HWND)0x0) {
      FUN_0040117d(uVar30);
    }
    break;
  case 0x40:
    uVar29 = FUN_00402da9(0);
    local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
    uVar30 = (uint)uVar29;
    if (0x1f < uVar30) goto LAB_00402953;
    if ((HWND)local_28.dwLowDateTime == (HWND)0x0) {
      if (local_2c == (HWND)0x0) {
        FUN_004066df((LPWSTR)local_10,*(int *)(DAT_00429a70 + 0x94 + uVar30 * 4));
      }
      else {
        *(HWND *)(DAT_00429a70 + 0x94 + uVar30 * 4) = local_34[1];
      }
    }
    else {
      if (local_2c == (HWND)0x0) {
        pHVar16 = (HWND)FUN_004012e2(0);
        pHVar25 = local_10;
        goto switchD_00401b00_default;
      }
      FUN_00401299(uVar30);
      FUN_004011ef(0,0);
    }
    break;
  case 0x41:
    if ((HWND)local_28.dwLowDateTime == (HWND)0x0) {
      pFVar17 = FUN_00406a96(5);
      pWVar21 = FUN_00402dcb(0x22);
      if (((pFVar17 == (FARPROC)0x0) ||
          (HVar18 = IIDFromString(pWVar21,(LPIID)local_64), HVar18 < 0)) ||
         (iVar20 = (*pFVar17)(local_64,local_28.dwLowDateTime,0,&param_1), iVar20 < 0)) {
        local_8 = (HWND)0x1;
        *(undefined2 *)&local_10->unused = 0;
      }
      else {
        FUN_004066a2((LPWSTR)local_10,(LPCWSTR)param_1);
        CoTaskMemFree(param_1);
      }
    }
    else if ((HWND)local_28.dwLowDateTime == (HWND)0x1) {
      uVar29 = FUN_00402da9(2);
      local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
      puVar23 = (undefined4 *)uVar29;
      uVar29 = FUN_00402da9(4);
      local_18._4_4_ = (HWND)((ulonglong)uVar29 >> 0x20);
      param_1 = (HWND)0x0;
      if (puVar23 == (undefined4 *)0x0) {
        puVar23 = &DAT_00429ae0;
      }
      FUN_0040614d((undefined1 *)&param_1,((uint)uVar29 >> 0x18) + (int)puVar23,(uint)uVar29 & 0xff)
      ;
      pHVar25 = local_10;
      pHVar16 = param_1;
      goto switchD_00401b00_default;
    }
    break;
  case 0x43:
    SendMessageW(DAT_00429a68,0xb,DAT_00424f48 & (uint)local_34[0],0);
    if (local_34[0] != (HWND)0x0) {
      InvalidateRect(local_c,(RECT *)0x0,0);
    }
  }
switchD_0040148a_caseD_42:
  _DAT_00429ae8 = (int)&local_8->unused + _DAT_00429ae8;
LAB_00402c58:
  local_34[0] = (HWND)0x0;
switchD_0040148a_caseD_2:
  return local_34[0];
}



/* Function: FUN_00402da9 */

void __cdecl FUN_00402da9(int param_1)

{
  ushort *puVar1;
  
  puVar1 = (ushort *)FUN_004066df((LPWSTR)0x0,*(int *)(DAT_0040ce54 + param_1 * 4));
  FUN_00406602(puVar1);
  return;
}



/* Function: FUN_00402dcb */

LPCWSTR FUN_00402dcb(uint param_1)

{
  uint uVar1;
  LPCWSTR pWVar2;
  
  uVar1 = param_1;
  if ((int)param_1 < 0) {
    uVar1 = -param_1;
  }
  pWVar2 = (LPCWSTR)FUN_004066df((LPWSTR)(&DAT_0040a5f8 + ((int)uVar1 >> 4) * 0x800),
                                 *(int *)(DAT_0040ce54 + (uVar1 & 0xf) * 4));
  if ((int)param_1 < 0) {
    FUN_00406950(pWVar2);
  }
  return pWVar2;
}



/* Function: FUN_00402e0b */

uint FUN_00402e0b(HKEY param_1)

{
  uint uVar1;
  LPCWSTR pWVar2;
  uint uVar3;
  LSTATUS LVar4;
  HKEY *ppHVar5;
  
  ppHVar5 = &param_1;
  uVar1 = (uint)param_1 | 0x100020;
  pWVar2 = FUN_00402dcb(0x22);
  uVar3 = FUN_00402e43(*(int *)(DAT_0040ce54 + 4));
  LVar4 = FUN_0040650f(uVar3,pWVar2,uVar1,ppHVar5);
  return ~-(uint)(LVar4 != 0) & (uint)param_1;
}



/* Function: FUN_00402e43 */

int FUN_00402e43(int param_1)

{
  if (-1 < param_1) {
    param_1 = DAT_00429ae4 + -0x7fffffff + param_1;
  }
  return param_1;
}



/* Function: FUN_00402e5b */

uint FUN_00402e5b(int param_1,LPCWSTR param_2,HKEY param_3)

{
  uint uVar1;
  uint uVar2;
  LSTATUS LVar3;
  HKEY *ppHVar4;
  
  ppHVar4 = &param_3;
  uVar1 = (uint)param_3 | 0x100020;
  uVar2 = FUN_00402e43(param_1);
  LVar3 = FUN_0040653d(uVar2,param_2,uVar1,ppHVar4);
  return ~-(uint)(LVar3 != 0) & (uint)param_3;
}



/* Function: FUN_00402e89 */

LSTATUS FUN_00402e89(int param_1,LPCWSTR param_2,uint param_3)

{
  LSTATUS LVar1;
  uint uVar2;
  HKEY pHVar3;
  uint *puVar4;
  
  if (*param_2 == L'\0') {
    LVar1 = 0x3eb;
  }
  else {
    param_3 = param_3 | 0x100020;
    puVar4 = &param_3;
    uVar2 = FUN_00402e43(param_1);
    pHVar3 = (HKEY)FUN_0040648e(uVar2,puVar4);
    if (pHVar3 == (HKEY)0x0) {
      LVar1 = 6;
    }
    else {
      LVar1 = FUN_00402ece(pHVar3,param_2,param_3);
    }
  }
  return LVar1;
}



/* Function: FUN_00402ece */

LSTATUS FUN_00402ece(HKEY param_1,LPCWSTR param_2,uint param_3)

{
  LSTATUS LVar1;
  FARPROC pFVar2;
  WCHAR local_218 [262];
  DWORD local_c;
  HKEY local_8;
  
  LVar1 = FUN_0040650f((uint)param_1,param_2,CONCAT31((int3)((param_3 & 0x300) >> 8),9),&local_8);
  if (LVar1 == 0) {
    if ((param_3 & 2) != 0) {
      local_c = 0;
      LVar1 = RegEnumValueW(local_8,0,local_218,&local_c,(LPDWORD)0x0,(LPDWORD)0x0,(LPBYTE)0x0,
                            (LPDWORD)0x0);
      if (LVar1 != 0x103) {
LAB_00402f96:
        RegCloseKey(local_8);
        return 0x3eb;
      }
    }
    do {
      LVar1 = RegEnumKeyW(local_8,0,local_218,0x105);
      if (LVar1 != 0) break;
      if ((param_3 & 1) != 0) goto LAB_00402f96;
      LVar1 = FUN_00402ece(local_8,local_218,param_3);
    } while (LVar1 == 0);
    RegCloseKey(local_8);
    pFVar2 = FUN_00406a96(3);
    if (pFVar2 == (FARPROC)0x0) {
      LVar1 = RegDeleteKeyW(param_1,param_2);
    }
    else {
      LVar1 = (*pFVar2)(param_1,param_2,param_3 & 0x300,0);
    }
  }
  return LVar1;
}



/* Function: FUN_00402fb8 */

undefined4 FUN_00402fb8(HWND param_1,int param_2)

{
  undefined4 uVar1;
  wchar_t *pwVar2;
  WCHAR local_84 [64];
  
  if (param_2 == 0x110) {
    SetTimer(param_1,1,0xfa,(TIMERPROC)0x0);
    param_2 = 0x113;
  }
  if (param_2 == 0x113) {
    uVar1 = FUN_00403037();
    pwVar2 = u_unpacking_data___d___0040a054;
    if (DAT_00429a70 == 0) {
      pwVar2 = u_verifying_installer___d___0040a020;
    }
    wsprintfW(local_84,pwVar2,uVar1);
    SetWindowTextW(param_1,local_84);
    SetDlgItemTextW(param_1,0x406,local_84);
  }
  return 0;
}



/* Function: FUN_00403037 */

void FUN_00403037(void)

{
  uint nNumber;
  
  nNumber = DAT_00420ef0;
  if (DAT_00420f00 <= DAT_00420ef0) {
    nNumber = DAT_00420f00;
  }
  MulDiv(nNumber,100,DAT_00420f00);
  return;
}



/* Function: FUN_00403053 */

void __cdecl FUN_00403053(int param_1)

{
  DWORD DVar1;
  undefined4 uVar2;
  WCHAR local_84 [64];
  
  if (param_1 == 0) {
    if (DAT_00420efc == (HWND)0x0) {
      DVar1 = GetTickCount();
      if (DAT_00429a6c < DVar1) {
        if (DAT_00429a68 == 0) {
          DAT_00420efc = CreateDialogParamW(DAT_00429a60,(LPCWSTR)0x6f,(HWND)0x0,FUN_00402fb8,0);
          ShowWindow(DAT_00420efc,5);
        }
        else if (((byte)DAT_00429b14 & 1) != 0) {
          uVar2 = FUN_00403037();
          wsprintfW(local_84,u______d___0040a080,uVar2);
          FUN_00405727(0,local_84);
        }
      }
    }
    else {
      FUN_00406ad2(0);
    }
  }
  else {
    if (DAT_00420efc != (HWND)0x0) {
      DestroyWindow(DAT_00420efc);
    }
    DAT_00420efc = (HWND)0x0;
  }
  return;
}



/* Function: FUN_004030f5 */

wchar_t * FUN_004030f5(uint param_1)

{
  DWORD DVar1;
  HANDLE hFile;
  LPCWSTR pWVar2;
  uint uVar3;
  uint uVar4;
  int iVar5;
  undefined4 *puVar6;
  int *piVar7;
  uint uVar8;
  WCHAR local_230 [260];
  uint local_28;
  int local_24;
  int local_20;
  int local_1c;
  int local_18;
  SIZE_T local_14;
  uint local_10;
  int local_c;
  uint local_8;
  
  local_8 = 0;
  local_c = 0;
  DVar1 = GetTickCount();
  DAT_00429a6c = DVar1 + 1000;
  GetModuleFileNameW((HMODULE)0x0,(LPWSTR)&DAT_00437800,0x400);
  hFile = (HANDLE)FUN_00406192((LPCWSTR)&DAT_00437800,0x80000000,3);
  if (hFile == (HANDLE)0xffffffff) {
    DAT_0040a018 = hFile;
    return u_Error_launching_installer_0040a2b8;
  }
  DAT_0040a018 = hFile;
  FUN_004066a2((LPWSTR)&DAT_00435800,(LPCWSTR)&DAT_00437800);
  pWVar2 = FUN_00405fbd((LPCWSTR)&DAT_00435800);
  FUN_004066a2((LPWSTR)&DAT_00438000,pWVar2);
  uVar3 = GetFileSize(hFile,(LPDWORD)0x0);
  DAT_00420f00 = uVar3;
  for (; uVar3 != 0; uVar3 = uVar3 - uVar8) {
    uVar4 = (-(uint)(DAT_00429a74 != 0) & 0x7e00) + 0x200;
    uVar8 = uVar3;
    if (uVar4 <= uVar3) {
      uVar8 = uVar4;
    }
    iVar5 = FUN_00403607(&DAT_00418ef0,uVar8);
    if (iVar5 == 0) {
      FUN_00403053(1);
      goto LAB_00403347;
    }
    if (DAT_00429a74 == 0) {
      FUN_0040614d((undefined1 *)&local_28,0x418ef0,0x1c);
      if (((((local_28 & 0xfffffff0) == 0) && (local_24 == -0x21524111)) && (local_18 == 0x74736e49)
          ) && ((local_1c == 0x74666f73 && (local_20 == 0x6c6c754e)))) {
        param_1 = param_1 | local_28;
        DAT_00429b00 = DAT_00429b00 | param_1 & 2;
        DAT_00429a74 = DAT_00420ef0;
        if (uVar3 < local_10) goto LAB_00403347;
        if (((param_1 & 8) == 0) && ((param_1 & 4) != 0)) break;
        local_c = local_c + 1;
        uVar3 = local_10 - 4;
        if (uVar3 < uVar8) {
          uVar8 = uVar3;
        }
      }
    }
    else if ((param_1 & 2) == 0) {
      FUN_00403053(0);
    }
    if (uVar3 < DAT_00420f00) {
      local_8 = FUN_00406b83(local_8,&DAT_00418ef0,uVar8);
    }
    DAT_00420ef0 = DAT_00420ef0 + uVar8;
  }
  FUN_00403053(1);
  if (DAT_00429a74 != 0) {
    if (local_c != 0) {
      FUN_0040361d(DAT_00420ef0);
      iVar5 = FUN_00403607(&param_1,4);
      if ((iVar5 == 0) || (local_8 != param_1)) goto LAB_00403347;
    }
    puVar6 = (undefined4 *)GlobalAlloc(0x40,local_14);
    FUN_00406bf1(0x40ce68);
    FUN_004061c1(local_230,(LPCWSTR)&DAT_00436800);
    DAT_0040a01c = CreateFileW(local_230,0xc0000000,0,(LPSECURITY_ATTRIBUTES)0x0,2,0x4000100,
                               (HANDLE)0x0);
    if (DAT_0040a01c == (HANDLE)0xffffffff) {
      return u_Error_writing_temporary_file__Ma_0040a230;
    }
    DAT_00420f04 = FUN_0040361d(DAT_00429a74 + 0x1c);
    DAT_00420ef8 = (DAT_00420f04 - (~local_28 & 4)) + -0x1c + local_10;
    DVar1 = FUN_00403396(0xffffffff,(HANDLE)0x0,puVar6,local_14);
    if (DVar1 == local_14) {
      DAT_00429a78 = *puVar6;
      if ((local_28 & 1) != 0) {
        DAT_00429a7c = DAT_00429a7c + 1;
      }
      piVar7 = puVar6 + 0x11;
      iVar5 = 8;
      DAT_00429a70 = puVar6;
      do {
        piVar7 = piVar7 + -2;
        *piVar7 = *piVar7 + (int)puVar6;
        iVar5 = iVar5 + -1;
      } while (iVar5 != 0);
      puVar6[0xf] = DAT_00420ef4;
      FUN_0040614d(&DAT_00429a80,(int)(puVar6 + 1),0x40);
      return (wchar_t *)0x0;
    }
  }
LAB_00403347:
  return u_Installer_integrity_check_has_fa_0040a098;
}



/* Function: FUN_00403396 */

int FUN_00403396(DWORD param_1,HANDLE param_2,LPVOID param_3,DWORD param_4)

{
  int iVar1;
  int iVar2;
  DWORD nNumberOfBytesToRead;
  BOOL BVar3;
  DWORD local_8;
  
  if (-1 < (int)param_1) {
    DAT_00420ef4 = param_1 + DAT_00429ab8;
    SetFilePointer(DAT_0040a01c,DAT_00420ef4,(PLONG)0x0,0);
  }
  iVar1 = FUN_0040349e(4);
  if (iVar1 < 0) {
    return iVar1;
  }
  iVar1 = FUN_00406215(DAT_0040a01c,&param_1,4);
  if (iVar1 != 0) {
    DAT_00420ef4 = DAT_00420ef4 + 4;
    iVar1 = FUN_0040349e(param_1);
    if (iVar1 < 0) {
      return iVar1;
    }
    if (param_3 == (LPVOID)0x0) {
      param_3 = (LPVOID)0x0;
      while( true ) {
        if ((int)param_1 < 1) {
          return iVar1;
        }
        local_8 = param_1;
        if (0x3fff < (int)param_1) {
          local_8 = 0x4000;
        }
        iVar2 = FUN_00406215(DAT_0040a01c,&DAT_00414ef0,local_8);
        if (iVar2 == 0) break;
        iVar2 = FUN_00406244(param_2,&DAT_00414ef0,local_8);
        if (iVar2 == 0) {
          return -2;
        }
        param_1 = param_1 - local_8;
        DAT_00420ef4 = DAT_00420ef4 + local_8;
        iVar1 = iVar1 + local_8;
      }
    }
    else {
      nNumberOfBytesToRead = param_1;
      if ((int)param_4 <= (int)param_1) {
        nNumberOfBytesToRead = param_4;
      }
      BVar3 = ReadFile(DAT_0040a01c,param_3,nNumberOfBytesToRead,&local_8,(LPOVERLAPPED)0x0);
      if (BVar3 != 0) {
        DAT_00420ef4 = DAT_00420ef4 + local_8;
        return local_8;
      }
    }
  }
  return -3;
}



/* Function: FUN_0040349e */

/* WARNING: Type propagation algorithm not settling */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same address */

undefined4 FUN_0040349e(int param_1)

{
  DWORD DVar1;
  int iVar2;
  undefined *puVar3;
  
  iVar2 = (DAT_00420ef4 - DAT_0040ce60) + param_1;
  DVar1 = GetTickCount();
  DAT_00429a6c = DVar1 + 500;
  if (0 < iVar2) {
    FUN_0040361d(DAT_00420f04);
    SetFilePointer(DAT_0040a01c,DAT_0040ce60,(PLONG)0x0,0);
    DAT_00420ef0 = 0;
    DAT_00420f00 = iVar2;
    do {
      DVar1 = 0x4000;
      if (DAT_00420ef8 - DAT_00420f04 < 0x4001) {
        DVar1 = DAT_00420ef8 - DAT_00420f04;
      }
      iVar2 = FUN_00403607(&DAT_00414ef0,DVar1);
      if (iVar2 == 0) {
        return 0xffffffff;
      }
      DAT_00420f04 = DAT_00420f04 + DVar1;
      _DAT_0040ce80 = &DAT_00414ef0;
      DAT_0040ce84 = DVar1;
      do {
        if ((DAT_00429a70 != 0) && (DAT_00429b00 == 0)) {
          DAT_00420ef0 = DAT_0040ce60 + ((DAT_00420f00 - DAT_00420ef4) - param_1);
          FUN_00403053(0);
        }
        DAT_0040ce88 = &DAT_0040cef0;
        _DAT_0040ce8c = 0x8000;
        iVar2 = FUN_00406c11((SIZE_T *)&DAT_0040ce68);
        if (iVar2 < 0) {
          return 0xfffffffd;
        }
        puVar3 = DAT_0040ce88 + -0x40cef0;
        if (puVar3 == (undefined *)0x0) {
          if (DAT_0040ce84 != 0) {
            return 0xfffffffd;
          }
          if (DVar1 == 0) {
            return 0xfffffffd;
          }
          break;
        }
        iVar2 = FUN_00406244(DAT_0040a01c,&DAT_0040cef0,(DWORD)puVar3);
        if (iVar2 == 0) {
          return 0xfffffffe;
        }
        DAT_0040ce60 = DAT_0040ce60 + (int)puVar3;
      } while (DAT_0040ce84 != 0);
    } while (0 < (DAT_00420ef4 - DAT_0040ce60) + param_1);
    SetFilePointer(DAT_0040a01c,DAT_00420ef4,(PLONG)0x0,0);
  }
  FUN_00403053(1);
  return 0;
}



/* Function: FUN_00403607 */

void FUN_00403607(LPVOID param_1,DWORD param_2)

{
  FUN_00406215(DAT_0040a018,param_1,param_2);
  return;
}



/* Function: FUN_0040361d */

void FUN_0040361d(LONG param_1)

{
  SetFilePointer(DAT_0040a018,param_1,(PLONG)0x0,0);
  return;
}



/* Function: FUN_00403634 */

void FUN_00403634(void)

{
  int iVar1;
  
  FUN_00406950((LPCWSTR)&DAT_00436800);
  iVar1 = FUN_00405fe8((ushort *)&DAT_00436800);
  if (iVar1 == 0) {
    return;
  }
  FUN_00405f71((LPCWSTR)&DAT_00436800);
  FUN_00405c50((LPCWSTR)&DAT_00436800);
  FUN_004061c1((LPWSTR)&DAT_00436000,(LPCWSTR)&DAT_00436800);
  return;
}



/* Function: entry */
